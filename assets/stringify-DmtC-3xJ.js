var v=Object.defineProperty;var nn=(n,r,i)=>r in n?v(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i;var B=(n,r,i)=>nn(n,typeof r!="symbol"?r+"":r,i);function x(n){return en.test(n)}const en=/^-?[0-9]+$/;function X(n){return rn.test(n)}const rn=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function tn(n,r){const i=Number.parseFloat(n),e=String(i),c=D(n),y=D(e);return!!(c===y||(r==null?void 0:r.approx)===!0&&!x(n)&&y.length>=14&&c.startsWith(y.substring(0,14)))}let E=function(n){return n.underflow="underflow",n.overflow="overflow",n.truncate_integer="truncate_integer",n.truncate_float="truncate_float",n}({});function P(n){if(tn(n,{approx:!1}))return;if(x(n))return E.truncate_integer;const r=Number.parseFloat(n);return Number.isFinite(r)?r===0?E.underflow:E.truncate_float:E.overflow}function Jn(n,r){const i=Number.parseFloat(n),e=P(n);if((r==null?void 0:r.approx)===!0?e&&e!==E.truncate_float:e){const c=e==null?void 0:e.replace(/_\w+$/,"");throw new Error(`Cannot safely convert to number: the value '${n}' would ${c} and become ${i}`)}return i}function D(n){return n.replace(on,"").replace(sn,"").replace(fn,"").replace(cn,"")}const on=/[eE][+-]?\d+$/,cn=/^-?(0*)?/,sn=/\./,fn=/0+$/;class U{constructor(r){B(this,"isLosslessNumber",!0);if(!X(r))throw new Error(`Invalid number (value: "${r}")`);this.value=r}valueOf(){const r=P(this.value);if(r===void 0||r===E.truncate_float)return Number.parseFloat(this.value);if(x(this.value))return BigInt(this.value);throw new Error(`Cannot safely convert to number: the value '${this.value}' would ${r} and become ${Number.parseFloat(this.value)}`)}toString(){return this.value}}function un(n){return n&&typeof n=="object"&&n.isLosslessNumber===!0||!1}function Vn(n){if(D(String(n)).length>15)throw new Error(`Invalid number: contains more than 15 digits and is most likely truncated and unsafe by itself (value: ${n})`);if(Number.isNaN(n))throw new Error("Invalid number: NaN");if(!Number.isFinite(n))throw new Error(`Invalid number: ${n}`);return new U(String(n))}function an(n){return new U(n)}function Xn(n){return x(n)?BigInt(n):Number.parseFloat(n)}function dn(n,r){return R({"":n},"",n,r)}function R(n,r,i,e){return Array.isArray(i)?e.call(n,r,hn(i,e)):i&&typeof i=="object"&&!un(i)?e.call(n,r,ln(i,e)):e.call(n,r,i)}function ln(n,r){for(const i of Object.keys(n)){const e=R(n,i,n[i],r);e!==void 0?n[i]=e:delete n[i]}return n}function hn(n,r){for(let i=0;i<n.length;i++)n[i]=R(n,String(i),n[i],r);return n}function Pn(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:an,e=0;const c=b();return d(c),w(),r?dn(c,r):c;function y(){if(n.charCodeAt(e)===An){e++,p();const o={};let f=!0;for(;e<n.length&&n.charCodeAt(e)!==T;){f?f=!1:(a(),p());const g=e,N=t();if(N===void 0){q();return}p(),s();const _=b();if(_===void 0){H();return}Object.prototype.hasOwnProperty.call(o,N)&&!L(_,o[N])&&K(N,g+1),o[N]=_}return n.charCodeAt(e)!==T&&Z(),e++,o}}function m(){if(n.charCodeAt(e)===En){e++,p();const o=[];let f=!0;for(;e<n.length&&n.charCodeAt(e)!==J;){f?f=!1:a();const g=b();l(g),o.push(g)}return n.charCodeAt(e)!==J&&M(),e++,o}}function b(){p();const o=t()??u()??y()??m()??C("true",!0)??C("false",!1)??C("null",null);return p(),o}function C(o,f){if(n.slice(e,e+o.length)===o)return e+=o.length,f}function p(){for(;pn(n.charCodeAt(e));)e++}function t(){if(n.charCodeAt(e)===k){e++;let o="";for(;e<n.length&&n.charCodeAt(e)!==k;){if(n.charCodeAt(e)===mn){const f=n[e+1],g=gn[f];g!==void 0?(o+=g,e++):f==="u"?O(n.charCodeAt(e+2))&&O(n.charCodeAt(e+3))&&O(n.charCodeAt(e+4))&&O(n.charCodeAt(e+5))?(o+=String.fromCharCode(Number.parseInt(n.slice(e+2,e+6),16)),e+=5):z(e):W(e)}else wn(n.charCodeAt(e))?o+=n[e]:Q(n[e]);e++}return $(),e++,o}}function u(){const o=e;if(n.charCodeAt(e)===V&&(e++,A(o)),n.charCodeAt(e)===F)e++;else if(yn(n.charCodeAt(e)))for(e++;I(n.charCodeAt(e));)e++;if(n.charCodeAt(e)===xn)for(e++,A(o);I(n.charCodeAt(e));)e++;if(n.charCodeAt(e)===Rn||n.charCodeAt(e)===Ln)for(e++,(n.charCodeAt(e)===V||n.charCodeAt(e)===$n)&&e++,A(o);I(n.charCodeAt(e));)e++;if(e>o)return i(n.slice(o,e))}function a(){if(n.charCodeAt(e)!==In)throw new SyntaxError(`Comma ',' expected after value ${h()}`);e++}function s(){if(n.charCodeAt(e)!==_n)throw new SyntaxError(`Colon ':' expected after property name ${h()}`);e++}function d(o){if(o===void 0)throw new SyntaxError(`JSON value expected ${h()}`)}function l(o){if(o===void 0)throw new SyntaxError(`Array item expected ${h()}`)}function w(){if(e<n.length)throw new SyntaxError(`Expected end of input ${h()}`)}function A(o){if(!I(n.charCodeAt(e))){const f=n.slice(o,e);throw new SyntaxError(`Invalid number '${f}', expecting a digit ${h()}`)}}function $(){if(n.charCodeAt(e)!==k)throw new SyntaxError(`End of string '"' expected ${h()}`)}function q(){throw new SyntaxError(`Quoted object key expected ${h()}`)}function K(o,f){throw new SyntaxError(`Duplicate key '${o}' encountered at position ${f}`)}function Z(){throw new SyntaxError(`Quoted object key or end of object '}' expected ${h()}`)}function M(){throw new SyntaxError(`Array item or end of array ']' expected ${h()}`)}function Q(o){throw new SyntaxError(`Invalid character '${o}' ${S()}`)}function W(o){const f=n.slice(o,o+2);throw new SyntaxError(`Invalid escape character '${f}' ${S()}`)}function H(){throw new SyntaxError(`Object value expected after ':' ${S()}`)}function z(o){const f=n.slice(o,o+6);throw new SyntaxError(`Invalid unicode character '${f}' ${S()}`)}function S(){return`at position ${e}`}function Y(){return e<n.length?`but got '${n[e]}'`:"but reached end of input"}function h(){return`${Y()} ${S()}`}}function pn(n){return n===bn||n===Cn||n===Sn||n===Nn}function O(n){return n>=F&&n<=j||n>=kn&&n<=Fn||n>=Dn&&n<=jn}function I(n){return n>=F&&n<=j}function yn(n){return n>=On&&n<=j}function wn(n){return n>=32&&n<=1114111}function L(n,r){return n===r?!0:Array.isArray(n)&&Array.isArray(r)?n.length===r.length&&n.every((i,e)=>L(i,r[e])):G(n)&&G(r)?[...new Set([...Object.keys(n),...Object.keys(r)])].every(e=>L(n[e],r[e])):!1}function G(n){return typeof n=="object"&&n!==null}const gn={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},mn=92,An=123,T=125,En=91,J=93,bn=32,Cn=10,Sn=9,Nn=13,k=34,$n=43,V=45,F=48,On=49,j=57,In=44,xn=46,_n=58,kn=65,Dn=97,Ln=69,Rn=101,Fn=70,jn=102;function Bn(n,r,i,e){const c=Gn(i),y=typeof r=="function"?r.call({"":n},"",n):n;return m(y,"");function m(t,u){if(Array.isArray(e)){const a=e.find(s=>s.test(t));if(a){const s=a.stringify(t);if(typeof s!="string"||!X(s))throw new Error(`Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: ${s})`);return s}}if(typeof t=="boolean"||typeof t=="number"||typeof t=="string"||t===null||t instanceof Date||t instanceof Boolean||t instanceof Number||t instanceof String)return JSON.stringify(t);if(t!=null&&t.isLosslessNumber||typeof t=="bigint")return t.toString();if(Array.isArray(t))return b(t,u);if(t&&typeof t=="object")return C(t,u)}function b(t,u){if(t.length===0)return"[]";const a=c?u+c:void 0;let s=c?`[
`:"[";for(let d=0;d<t.length;d++){const l=typeof r=="function"?r.call(t,String(d),t[d]):t[d];c&&(s+=a),typeof l<"u"&&typeof l!="function"?s+=m(l,a):s+="null",d<t.length-1&&(s+=c?`,
`:",")}return s+=c?`
${u}]`:"]",s}function C(t,u){if(typeof t.toJSON=="function")return Bn(t.toJSON(),r,i,void 0);const a=Array.isArray(r)?r.map(String):Object.keys(t);if(a.length===0)return"{}";const s=c?u+c:void 0;let d=!0,l=c?`{
`:"{";for(const w of a){const A=typeof r=="function"?r.call(t,w,t[w]):t[w];if(p(w,A)){d?d=!1:l+=c?`,
`:",";const $=JSON.stringify(w);l+=c?`${s+$}: `:`${$}:`,l+=m(A,s)}}return l+=c?`
${u}}`:"}",l}function p(t,u){return typeof u<"u"&&typeof u!="function"&&typeof u!="symbol"}}function Gn(n){if(typeof n=="number")return" ".repeat(n);if(typeof n=="string"&&n!=="")return n}export{U as L,E as U,Xn as a,un as b,X as c,tn as d,an as e,Jn as f,P as g,x as i,Pn as p,Bn as s,Vn as t};
