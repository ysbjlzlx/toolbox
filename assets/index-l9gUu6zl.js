import{af as M,a2 as ze,a3 as N,a1 as re,aa as an,a8 as wi,S as O,o as ce,a0 as St,E as x,ac as Ai,a7 as S,ai as se,aM as Ce,aN as Pe,ab as wt,ap as qe,a6 as Et,ax as vi,aO as Le,ad as Bi,ae as At,a9 as cn,aP as Re,ao as g,aQ as fn,aR as un,aS as Ee,aT as hn,G as vt,aU as tt,aV as ke,an as Bt,a5 as Di,aW as Ti,aX as le,aY as ut,B as Mi,aZ as $,a_ as dn,a$ as X,b0 as Oi,C as mn,b1 as pn,b2 as Ii,b3 as Li,b4 as ht,b5 as Pi,b6 as Ri,b7 as Ei,b8 as q,e as Ni,g as Ui,i as $i,m as Fi,n as Hi,x as Vi,y as Wi,z as ji,A as zi,a as qi}from"./json-editor-D3HpTOiY.js";let Gi=0;class z{constructor(e,n,i){this.set=e,this.base=n,this.modified=i,this.id=Gi++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new z([],null,[]);if(n.set.push(n),e)for(let i of e.set)n.set.push(i);return n}static defineModifier(){let e=new Ne;return n=>n.modified.indexOf(e)>-1?n:Ne.get(n.base||n,n.modified.concat(e).sort((i,o)=>i.id-o.id))}}let Ji=0;class Ne{constructor(){this.instances=[],this.id=Ji++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(l=>l.base==e&&Ki(n,l.modified));if(i)return i;let o=[],r=new z(o,e,n);for(let l of n)l.instances.push(r);let s=Qi(n);for(let l of e.set)if(!l.modified.length)for(let a of s)o.push(Ne.get(l,a));return r}}function Ki(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function Qi(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,o=e.length;i<o;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function Yi(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let o of n.split(" "))if(o){let r=[],s=2,l=o;for(let u=0;;){if(l=="..."&&u>0&&u+3==o.length){s=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+o);if(r.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),u+=h[0].length,u==o.length)break;let p=o[u++];if(u==o.length&&p=="!"){s=0;break}if(p!="/")throw new RangeError("Invalid path: "+o);l=o.slice(u)}let a=r.length-1,c=r[a];if(!c)throw new RangeError("Invalid path: "+o);let f=new Ue(i,s,a>0?r.slice(0,a):null);e[c]=f.sort(e[c])}}return gn.add(e)}const gn=new M;class Ue{constructor(e,n,i,o){this.tags=e,this.mode=n,this.context=i,this.next=o}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Ue.empty=new Ue([],2,null);function yn(t,e){let n=Object.create(null);for(let r of t)if(!Array.isArray(r.tag))n[r.tag.id]=r.class;else for(let s of r.tag)n[s.id]=r.class;let{scope:i,all:o=null}=e||{};return{style:r=>{let s=o;for(let l of r)for(let a of l.set){let c=n[a.id];if(c){s=s?s+" "+c:c;break}}return s},scope:i}}function Xi(t,e){let n=null;for(let i of t){let o=i.style(e);o&&(n=n?n+" "+o:o)}return n}function Zi(t,e,n,i=0,o=t.length){let r=new _i(i,Array.isArray(e)?e:[e],n);r.highlightRange(t.cursor(),i,o,"",r.highlighters),r.flush(o)}class _i{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,o,r){let{type:s,from:l,to:a}=e;if(l>=i||a<=n)return;s.isTop&&(r=this.highlighters.filter(p=>!p.scope||p.scope(s)));let c=o,f=eo(e)||Ue.empty,u=Xi(r,f.tags);if(u&&(c&&(c+=" "),c+=u,f.mode==1&&(o+=(o?" ":"")+u)),this.startSpan(Math.max(n,l),c),f.opaque)return;let h=e.tree&&e.tree.prop(M.mounted);if(h&&h.overlay){let p=e.node.enter(h.overlay[0].from+l,1),y=this.highlighters.filter(P=>!P.scope||P.scope(h.tree.type)),b=e.firstChild();for(let P=0,v=l;;P++){let k=P<h.overlay.length?h.overlay[P]:null,H=k?k.from+l:a,R=Math.max(n,v),C=Math.min(i,H);if(R<C&&b)for(;e.from<C&&(this.highlightRange(e,R,C,o,r),this.startSpan(Math.min(C,e.to),c),!(e.to>=H||!e.nextSibling())););if(!k||H>i)break;v=k.to+l,v>n&&(this.highlightRange(p.cursor(),Math.max(n,k.from+l),Math.min(i,v),"",y),this.startSpan(Math.min(i,v),c))}b&&e.parent()}else if(e.firstChild()){h&&(o="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,o,r),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function eo(t){let e=t.type.prop(gn);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const d=z.define,ve=d(),Q=d(),Nt=d(Q),Ut=d(Q),Y=d(),Be=d(Y),nt=d(Y),j=d(),te=d(j),V=d(),W=d(),dt=d(),me=d(dt),De=d(),m={comment:ve,lineComment:d(ve),blockComment:d(ve),docComment:d(ve),name:Q,variableName:d(Q),typeName:Nt,tagName:d(Nt),propertyName:Ut,attributeName:d(Ut),className:d(Q),labelName:d(Q),namespace:d(Q),macroName:d(Q),literal:Y,string:Be,docString:d(Be),character:d(Be),attributeValue:d(Be),number:nt,integer:d(nt),float:d(nt),bool:d(Y),regexp:d(Y),escape:d(Y),color:d(Y),url:d(Y),keyword:V,self:d(V),null:d(V),atom:d(V),unit:d(V),modifier:d(V),operatorKeyword:d(V),controlKeyword:d(V),definitionKeyword:d(V),moduleKeyword:d(V),operator:W,derefOperator:d(W),arithmeticOperator:d(W),logicOperator:d(W),bitwiseOperator:d(W),compareOperator:d(W),updateOperator:d(W),definitionOperator:d(W),typeOperator:d(W),controlOperator:d(W),punctuation:dt,separator:d(dt),bracket:me,angleBracket:d(me),squareBracket:d(me),paren:d(me),brace:d(me),content:j,heading:te,heading1:d(te),heading2:d(te),heading3:d(te),heading4:d(te),heading5:d(te),heading6:d(te),contentSeparator:d(j),list:d(j),quote:d(j),emphasis:d(j),strong:d(j),link:d(j),monospace:d(j),strikethrough:d(j),inserted:d(),deleted:d(),changed:d(),invalid:d(),meta:De,documentMeta:d(De),annotation:d(De),processingInstruction:d(De),definition:z.defineModifier(),constant:z.defineModifier(),function:z.defineModifier(),standard:z.defineModifier(),local:z.defineModifier(),special:z.defineModifier()};yn([{tag:m.link,class:"tok-link"},{tag:m.heading,class:"tok-heading"},{tag:m.emphasis,class:"tok-emphasis"},{tag:m.strong,class:"tok-strong"},{tag:m.keyword,class:"tok-keyword"},{tag:m.atom,class:"tok-atom"},{tag:m.bool,class:"tok-bool"},{tag:m.url,class:"tok-url"},{tag:m.labelName,class:"tok-labelName"},{tag:m.inserted,class:"tok-inserted"},{tag:m.deleted,class:"tok-deleted"},{tag:m.literal,class:"tok-literal"},{tag:m.string,class:"tok-string"},{tag:m.number,class:"tok-number"},{tag:[m.regexp,m.escape,m.special(m.string)],class:"tok-string2"},{tag:m.variableName,class:"tok-variableName"},{tag:m.local(m.variableName),class:"tok-variableName tok-local"},{tag:m.definition(m.variableName),class:"tok-variableName tok-definition"},{tag:m.special(m.variableName),class:"tok-variableName2"},{tag:m.definition(m.propertyName),class:"tok-propertyName tok-definition"},{tag:m.typeName,class:"tok-typeName"},{tag:m.namespace,class:"tok-namespace"},{tag:m.className,class:"tok-className"},{tag:m.macroName,class:"tok-macroName"},{tag:m.propertyName,class:"tok-propertyName"},{tag:m.operator,class:"tok-operator"},{tag:m.comment,class:"tok-comment"},{tag:m.meta,class:"tok-meta"},{tag:m.invalid,class:"tok-invalid"},{tag:m.punctuation,class:"tok-punctuation"}]);var it;const ye=new M,to=new M;class G{constructor(e,n,i=[],o=""){this.data=e,this.name=o,ce.prototype.hasOwnProperty("tree")||Object.defineProperty(ce.prototype,"tree",{get(){return L(this)}}),this.parser=n,this.extension=[_.of(this),ce.languageData.of((r,s,l)=>{let a=$t(r,s,l),c=a.type.prop(ye);if(!c)return[];let f=r.facet(c),u=a.type.prop(to);if(u){let h=a.resolve(s-a.from,l);for(let p of u)if(p.test(h,r)){let y=r.facet(p.facet);return p.type=="replace"?y:y.concat(f)}}return f})].concat(i)}isActiveAt(e,n,i=-1){return $t(e,n,i).type.prop(ye)==this.data}findRegions(e){let n=e.facet(_);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],o=(r,s)=>{if(r.prop(ye)==this.data){i.push({from:s,to:s+r.length});return}let l=r.prop(M.mounted);if(l){if(l.tree.prop(ye)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+s,to:a.to+s});else i.push({from:s,to:s+r.length});return}else if(l.overlay){let a=i.length;if(o(l.tree,l.overlay[0].from+s),i.length>a)return}}for(let a=0;a<r.children.length;a++){let c=r.children[a];c instanceof se&&o(c,r.positions[a]+s)}};return o(L(e),0),i}get allowsNesting(){return!0}}G.setState=O.define();function $t(t,e,n){let i=t.facet(_),o=L(t).topNode;if(!i||i.allowsNesting)for(let r=o;r;r=r.enter(e,n,vi.ExcludeBuffers))r.type.isTop&&(o=r);return o}function L(t){let e=t.field(G.state,!1);return e?e.tree:se.empty}class no{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let pe=null;class $e{constructor(e,n,i=[],o,r,s,l,a){this.parser=e,this.state=n,this.fragments=i,this.tree=o,this.treeLen=r,this.viewport=s,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new $e(e,n,[],se.empty,0,i,[],null)}startParse(){return this.parser.startParse(new no(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=se.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let o=Date.now()+e;e=()=>Date.now()>o}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let o=this.parse.advance();if(o)if(this.fragments=this.withoutTempSkipped(Le.addTree(o,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=o,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Le.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=pe;pe=this;try{return e()}finally{pe=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=Ft(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:o,treeLen:r,viewport:s,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((c,f,u,h)=>a.push({fromA:c,toA:f,fromB:u,toB:h})),i=Le.applyChanges(i,a),o=se.empty,r=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let f=e.mapPos(c.from,1),u=e.mapPos(c.to,-1);f<u&&l.push({from:f,to:u})}}}return new $e(this.parser,n,i,o,r,s,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:o,to:r}=this.skipped[i];o<e.to&&r>e.from&&(this.fragments=Ft(this.fragments,o,r),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends Bi{createParse(n,i,o){let r=o[0].from,s=o[o.length-1].to;return{parsedPos:r,advance(){let a=pe;if(a){for(let c of o)a.tempSkipped.push(c);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=s,new se(At.none,[],[],s-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return pe}}function Ft(t,e,n){return Le.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class ue{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new ue(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=$e.create(e.facet(_).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new ue(i)}}G.state=re.define({create:ue.init,update(t,e){for(let n of e.effects)if(n.is(G.setState))return n.value;return e.startState.facet(_)!=e.state.facet(_)?ue.init(e.state):t.apply(e)}});let kn=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(kn=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const ot=typeof navigator<"u"&&(!((it=navigator.scheduling)===null||it===void 0)&&it.isInputPending)?()=>navigator.scheduling.isInputPending():null,io=ze.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(G.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(G.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=kn(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:o}}=this.view,r=i.field(G.state);if(r.tree==r.context.tree&&r.context.isDone(o+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!ot?Math.max(25,e.timeRemaining()-5):1e9),l=r.context.treeLen<o&&i.doc.length>o+1e3,a=r.context.work(()=>ot&&ot()||Date.now()>s,o+(l?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:G.setState.of(new ue(r.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Pe(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),_=N.define({combine(t){return t.length?t[0]:null},enables:t=>[G.state,io,x.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]}),oo=N.define(),bn=N.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function ro(t){let e=t.facet(bn);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function so(t,e){let n="",i=t.tabSize,o=t.facet(bn)[0];if(o=="	"){for(;e>=i;)n+="	",e-=i;o=" "}for(let r=0;r<e;r++)n+=o;return n}function lo(t,e){t instanceof ce&&(t=new xn(t));for(let i of t.state.facet(oo)){let o=i(t,e);if(o!==void 0)return o}let n=L(t.state);return n.length>=e?co(t,n,e):null}class xn{constructor(e,n={}){this.state=e,this.options=n,this.unit=ro(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:o,simulateDoubleBreak:r}=this.options;return o!=null&&o>=i.from&&o<=i.to?r&&o==e?{text:"",from:e}:(n<0?o<e:o<=e)?{text:i.text.slice(o-i.from),from:o}:{text:i.text.slice(0,o-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:o}=this.lineAt(e,n);return i.slice(e-o,Math.min(i.length,e+100-o))}column(e,n=1){let{text:i,from:o}=this.lineAt(e,n),r=this.countColumn(i,e-o),s=this.options.overrideIndentation?this.options.overrideIndentation(o):-1;return s>-1&&(r+=s-this.countColumn(i,i.search(/\S|$/))),r}countColumn(e,n=e.length){return qe(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:o}=this.lineAt(e,n),r=this.options.overrideIndentation;if(r){let s=r(o);if(s>-1)return s}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const ao=new M;function co(t,e,n){let i=e.resolveStack(n),o=i.node.enterUnfinishedNodesBefore(n);if(o!=i.node){let r=[];for(let s=o;s!=i.node;s=s.parent)r.push(s);for(let s=r.length-1;s>=0;s--)i={node:r[s],next:i}}return Cn(i,t,n)}function Cn(t,e,n){for(let i=t;i;i=i.next){let o=uo(i.node);if(o)return o(Dt.create(e,n,i))}return 0}function fo(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function uo(t){let e=t.type.prop(ao);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(M.closedBy))){let o=t.lastChild,r=o&&i.indexOf(o.name)>-1;return s=>go(s,!0,1,void 0,r&&!fo(s)?o.from:void 0)}return t.parent==null?ho:null}function ho(){return 0}class Dt extends xn{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new Dt(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(mo(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return Cn(this.context.next,this.base,this.pos)}}function mo(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function po(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let o=t.options.simulateBreak,r=t.state.doc.lineAt(n.from),s=o==null||o<=r.from?r.to:Math.min(r.to,o);for(let l=n.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped)return a.from<s?n:null;l=a.to}}function go(t,e,n,i,o){let r=t.textAfter,s=r.match(/^\s*/)[0].length,l=i&&r.slice(s,s+i.length)==i||o==t.pos+s,a=po(t);return a?l?t.column(a.from):t.column(a.to):t.baseIndent+(l?0:t.unit*n)}const yo=200;function ko(){return ce.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,o=n.lineAt(i);if(i>o.from+yo)return t;let r=n.sliceString(o.from,i);if(!e.some(c=>c.test(r)))return t;let{state:s}=t,l=-1,a=[];for(let{head:c}of s.selection.ranges){let f=s.doc.lineAt(c);if(f.from==l)continue;l=f.from;let u=lo(s,f.from);if(u==null)continue;let h=/^\s*/.exec(f.text)[0],p=so(s,u);h!=p&&a.push({from:f.from,to:f.from+h.length,insert:p})}return a.length?[t,{changes:a,sequential:!0}]:t})}const bo=N.define(),xo=new M;function Co(t,e,n){let i=L(t);if(i.length<n)return null;let o=i.resolveStack(n,1),r=null;for(let s=o;s;s=s.next){let l=s.node;if(l.to<=n||l.from>n)continue;if(r&&l.from<e)break;let a=l.type.prop(xo);if(a&&(l.to<i.length-50||i.length==t.doc.length||!So(l))){let c=a(l,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(r=c)}}return r}function So(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Fe(t,e,n){for(let i of t.facet(bo)){let o=i(t,e,n);if(o)return o}return Co(t,e,n)}function Sn(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const Ge=O.define({map:Sn}),Se=O.define({map:Sn});function wn(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const oe=re.define({create(){return S.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(Ge)&&!wo(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(Bn),o=i?S.replace({widget:new Oo(i(e.state,n.value))}):Ht;t=t.update({add:[o.range(n.value.from,n.value.to)]})}else n.is(Se)&&(t=t.update({filter:(i,o)=>n.value.from!=i||n.value.to!=o,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;t.between(i,i,(o,r)=>{o<i&&r>i&&(n=!0)}),n&&(t=t.update({filterFrom:i,filterTo:i,filter:(o,r)=>r<=i||o>=i}))}return t},provide:t=>x.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,o)=>{n.push(i,o)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],o=t[n++];if(typeof i!="number"||typeof o!="number")throw new RangeError("Invalid JSON for fold state");e.push(Ht.range(i,o))}return S.set(e,!0)}});function He(t,e,n){var i;let o=null;return(i=t.field(oe,!1))===null||i===void 0||i.between(e,n,(r,s)=>{(!o||o.from>r)&&(o={from:r,to:s})}),o}function wo(t,e,n){let i=!1;return t.between(e,e,(o,r)=>{o==e&&r==n&&(i=!0)}),i}function An(t,e){return t.field(oe,!1)?e:e.concat(O.appendConfig.of(Dn()))}const Ao=t=>{for(let e of wn(t)){let n=Fe(t.state,e.from,e.to);if(n)return t.dispatch({effects:An(t.state,[Ge.of(n),vn(t,n)])}),!0}return!1},vo=t=>{if(!t.state.field(oe,!1))return!1;let e=[];for(let n of wn(t)){let i=He(t.state,n.from,n.to);i&&e.push(Se.of(i),vn(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function vn(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,o=t.state.doc.lineAt(e.to).number;return x.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${o}.`)}const Bo=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let o=t.lineBlockAt(i),r=Fe(e,o.from,o.to);r&&n.push(Ge.of(r)),i=(r?t.lineBlockAt(r.to):o).to+1}return n.length&&t.dispatch({effects:An(t.state,n)}),!!n.length},Do=t=>{let e=t.state.field(oe,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,o)=>{n.push(Se.of({from:i,to:o}))}),t.dispatch({effects:n}),!0},To=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Ao},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:vo},{key:"Ctrl-Alt-[",run:Bo},{key:"Ctrl-Alt-]",run:Do}],Mo={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},Bn=N.define({combine(t){return Ce(t,Mo)}});function Dn(t){return[oe,Po]}function Tn(t,e){let{state:n}=t,i=n.facet(Bn),o=s=>{let l=t.lineBlockAt(t.posAtDOM(s.target)),a=He(t.state,l.from,l.to);a&&t.dispatch({effects:Se.of(a)}),s.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,o,e);let r=document.createElement("span");return r.textContent=i.placeholderText,r.setAttribute("aria-label",n.phrase("folded code")),r.title=n.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=o,r}const Ht=S.replace({widget:new class extends wt{toDOM(t){return Tn(t,null)}}});class Oo extends wt{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Tn(e,this.value)}}const Io={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class rt extends Ai{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function Lo(t={}){let e=Object.assign(Object.assign({},Io),t),n=new rt(e,!0),i=new rt(e,!1),o=ze.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(_)!=s.state.facet(_)||s.startState.field(oe,!1)!=s.state.field(oe,!1)||L(s.startState)!=L(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let l=new an;for(let a of s.viewportLineBlocks){let c=He(s.state,a.from,a.to)?i:Fe(s.state,a.from,a.to)?n:null;c&&l.add(a.from,a.from,c)}return l.finish()}}),{domEventHandlers:r}=e;return[o,wi({class:"cm-foldGutter",markers(s){var l;return((l=s.plugin(o))===null||l===void 0?void 0:l.markers)||cn.empty},initialSpacer(){return new rt(e,!1)},domEventHandlers:Object.assign(Object.assign({},r),{click:(s,l,a)=>{if(r.click&&r.click(s,l,a))return!0;let c=He(s.state,l.from,l.to);if(c)return s.dispatch({effects:Se.of(c)}),!0;let f=Fe(s.state,l.from,l.to);return f?(s.dispatch({effects:Ge.of(f)}),!0):!1}})}),Dn()]}const Po=x.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Je{constructor(e,n){this.specs=e;let i;function o(l){let a=Et.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const r=typeof n.all=="string"?n.all:n.all?o(n.all):void 0,s=n.scope;this.scope=s instanceof G?l=>l.prop(ye)==s.data:s?l=>l==s:void 0,this.style=yn(e.map(l=>({tag:l.tag,class:l.class||o(Object.assign({},l,{tag:null}))})),{all:r}).style,this.module=i?new Et(i):null,this.themeType=n.themeType}static define(e,n){return new Je(e,n||{})}}const mt=N.define(),Mn=N.define({combine(t){return t.length?[t[0]]:null}});function st(t){let e=t.facet(mt);return e.length?e:t.facet(Mn)}function Ro(t,e){let n=[No],i;return t instanceof Je&&(t.module&&n.push(x.styleModule.of(t.module)),i=t.themeType),e!=null&&e.fallback?n.push(Mn.of(t)):i?n.push(mt.computeN([x.darkTheme],o=>o.facet(x.darkTheme)==(i=="dark")?[t]:[])):n.push(mt.of(t)),n}class Eo{constructor(e){this.markCache=Object.create(null),this.tree=L(e.state),this.decorations=this.buildDeco(e,st(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=L(e.state),i=st(e.state),o=i!=st(e.startState),{viewport:r}=e.view,s=e.changes.mapPos(this.decoratedTo,1);n.length<r.to&&!o&&n.type==this.tree.type&&s>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(n!=this.tree||e.viewportChanged||o)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=r.to)}buildDeco(e,n){if(!n||!this.tree.length)return S.none;let i=new an;for(let{from:o,to:r}of e.visibleRanges)Zi(this.tree,n,(s,l,a)=>{i.add(s,l,this.markCache[a]||(this.markCache[a]=S.mark({class:a})))},o,r);return i.finish()}}const No=St.high(ze.fromClass(Eo,{decorations:t=>t.decorations})),Uo=Je.define([{tag:m.meta,color:"#404740"},{tag:m.link,textDecoration:"underline"},{tag:m.heading,textDecoration:"underline",fontWeight:"bold"},{tag:m.emphasis,fontStyle:"italic"},{tag:m.strong,fontWeight:"bold"},{tag:m.strikethrough,textDecoration:"line-through"},{tag:m.keyword,color:"#708"},{tag:[m.atom,m.bool,m.url,m.contentSeparator,m.labelName],color:"#219"},{tag:[m.literal,m.inserted],color:"#164"},{tag:[m.string,m.deleted],color:"#a11"},{tag:[m.regexp,m.escape,m.special(m.string)],color:"#e40"},{tag:m.definition(m.variableName),color:"#00f"},{tag:m.local(m.variableName),color:"#30a"},{tag:[m.typeName,m.namespace],color:"#085"},{tag:m.className,color:"#167"},{tag:[m.special(m.variableName),m.macroName],color:"#256"},{tag:m.definition(m.propertyName),color:"#00c"},{tag:m.comment,color:"#940"},{tag:m.invalid,color:"#f00"}]),$o=x.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),On=1e4,In="()[]{}",Ln=N.define({combine(t){return Ce(t,{afterCursor:!0,brackets:In,maxScanDistance:On,renderMatch:Vo})}}),Fo=S.mark({class:"cm-matchingBracket"}),Ho=S.mark({class:"cm-nonmatchingBracket"});function Vo(t){let e=[],n=t.matched?Fo:Ho;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const Wo=re.define({create(){return S.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],i=e.state.facet(Ln);for(let o of e.state.selection.ranges){if(!o.empty)continue;let r=Te(e.state,o.head,-1,i)||o.head>0&&Te(e.state,o.head-1,1,i)||i.afterCursor&&(Te(e.state,o.head,1,i)||o.head<e.state.doc.length&&Te(e.state,o.head+1,-1,i));r&&(n=n.concat(i.renderMatch(r,e.state)))}return S.set(n,!0)},provide:t=>x.decorations.from(t)}),jo=[Wo,$o];function zo(t={}){return[Ln.of(t),jo]}const qo=new M;function pt(t,e,n){let i=t.prop(e<0?M.openedBy:M.closedBy);if(i)return i;if(t.name.length==1){let o=n.indexOf(t.name);if(o>-1&&o%2==(e<0?1:0))return[n[o+e]]}return null}function gt(t){let e=t.type.prop(qo);return e?e(t.node):t}function Te(t,e,n,i={}){let o=i.maxScanDistance||On,r=i.brackets||In,s=L(t),l=s.resolveInner(e,n);for(let a=l;a;a=a.parent){let c=pt(a.type,n,r);if(c&&a.from<a.to){let f=gt(a);if(f&&(n>0?e>=f.from&&e<f.to:e>f.from&&e<=f.to))return Go(t,e,n,a,f,c,r)}}return Jo(t,e,n,s,l.type,o,r)}function Go(t,e,n,i,o,r,s){let l=i.parent,a={from:o.from,to:o.to},c=0,f=l==null?void 0:l.cursor();if(f&&(n<0?f.childBefore(i.from):f.childAfter(i.to)))do if(n<0?f.to<=i.from:f.from>=i.to){if(c==0&&r.indexOf(f.type.name)>-1&&f.from<f.to){let u=gt(f);return{start:a,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(pt(f.type,n,s))c++;else if(pt(f.type,-n,s)){if(c==0){let u=gt(f);return{start:a,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}c--}}while(n<0?f.prevSibling():f.nextSibling());return{start:a,matched:!1}}function Jo(t,e,n,i,o,r,s){let l=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=s.indexOf(l);if(a<0||a%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},f=t.doc.iterRange(e,n>0?t.doc.length:0),u=0;for(let h=0;!f.next().done&&h<=r;){let p=f.value;n<0&&(h+=p.length);let y=e+h*n;for(let b=n>0?0:p.length-1,P=n>0?p.length:-1;b!=P;b+=n){let v=s.indexOf(p[b]);if(!(v<0||i.resolveInner(y+b,1).type!=o))if(v%2==0==n>0)u++;else{if(u==1)return{start:c,end:{from:y+b,to:y+b+1},matched:v>>1==a>>1};u--}}n>0&&(h+=p.length)}return f.done?{start:c,matched:!1}:null}const Ko=Object.create(null),Vt=[At.none],Wt=[],jt=Object.create(null),Qo=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Qo[t]=Yo(Ko,e);function lt(t,e){Wt.indexOf(t)>-1||(Wt.push(t),console.warn(e))}function Yo(t,e){let n=[];for(let l of e.split(" ")){let a=[];for(let c of l.split(".")){let f=t[c]||m[c];f?typeof f=="function"?a.length?a=a.map(f):lt(c,`Modifier ${c} used at start of tag`):a.length?lt(c,`Tag ${c} used as modifier`):a=Array.isArray(f)?f:[f]:lt(c,`Unknown highlighting tag ${c}`)}for(let c of a)n.push(c)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),o=i+" "+n.map(l=>l.id),r=jt[o];if(r)return r.id;let s=jt[o]=At.define({id:Vt.length,name:i,props:[Yi({[i]:n})]});return Vt.push(s),s.id}Re.RTL,Re.LTR;const Xo=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=Mt(t.state,n.from);return i.line?Zo(t):i.block?er(t):!1};function Tt(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let o=t(e,n);return o?(i(n.update(o)),!0):!1}}const Zo=Tt(ir,0),_o=Tt(Pn,0),er=Tt((t,e)=>Pn(t,e,nr(e)),0);function Mt(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const ge=50;function tr(t,{open:e,close:n},i,o){let r=t.sliceDoc(i-ge,i),s=t.sliceDoc(o,o+ge),l=/\s*$/.exec(r)[0].length,a=/^\s*/.exec(s)[0].length,c=r.length-l;if(r.slice(c-e.length,c)==e&&s.slice(a,a+n.length)==n)return{open:{pos:i-l,margin:l&&1},close:{pos:o+a,margin:a&&1}};let f,u;o-i<=2*ge?f=u=t.sliceDoc(i,o):(f=t.sliceDoc(i,i+ge),u=t.sliceDoc(o-ge,o));let h=/^\s*/.exec(f)[0].length,p=/\s*$/.exec(u)[0].length,y=u.length-p-n.length;return f.slice(h,h+e.length)==e&&u.slice(y,y+n.length)==n?{open:{pos:i+h+e.length,margin:/\s/.test(f.charAt(h+e.length))?1:0},close:{pos:o-p-n.length,margin:/\s/.test(u.charAt(y-1))?1:0}}:null}function nr(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),o=n.to<=i.to?i:t.doc.lineAt(n.to),r=e.length-1;r>=0&&e[r].to>i.from?e[r].to=o.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:o.to})}return e}function Pn(t,e,n=e.selection.ranges){let i=n.map(r=>Mt(e,r.from).block);if(!i.every(r=>r))return null;let o=n.map((r,s)=>tr(e,i[s],r.from,r.to));if(t!=2&&!o.every(r=>r))return{changes:e.changes(n.map((r,s)=>o[s]?[]:[{from:r.from,insert:i[s].open+" "},{from:r.to,insert:" "+i[s].close}]))};if(t!=1&&o.some(r=>r)){let r=[];for(let s=0,l;s<o.length;s++)if(l=o[s]){let a=i[s],{open:c,close:f}=l;r.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:f.pos-f.margin,to:f.pos+a.close.length})}return{changes:r}}return null}function ir(t,e,n=e.selection.ranges){let i=[],o=-1;for(let{from:r,to:s}of n){let l=i.length,a=1e9,c=Mt(e,r).line;if(c){for(let f=r;f<=s;){let u=e.doc.lineAt(f);if(u.from>o&&(r==s||s>u.from)){o=u.from;let h=/^\s*/.exec(u.text)[0].length,p=h==u.length,y=u.text.slice(h,h+c.length)==c?h:-1;h<u.text.length&&h<a&&(a=h),i.push({line:u,comment:y,token:c,indent:h,empty:p,single:!1})}f=u.to+1}if(a<1e9)for(let f=l;f<i.length;f++)i[f].indent<i[f].line.text.length&&(i[f].indent=a);i.length==l+1&&(i[l].single=!0)}}if(t!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:l,token:a,indent:c,empty:f,single:u}of i)(u||!f)&&r.push({from:l.from+c,insert:a+" "});let s=e.changes(r);return{changes:s,selection:e.selection.map(s,1)}}else if(t!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:s,comment:l,token:a}of i)if(l>=0){let c=s.from+l,f=c+a.length;s.text[f-s.from]==" "&&f++,r.push({from:c,to:f})}return{changes:r}}return null}const yt=vt.define(),or=vt.define(),rr=N.define(),Rn=N.define({combine(t){return Ce(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,o)=>e(i,o)||n(i,o)})}}),En=re.define({create(){return J.empty},update(t,e){let n=e.state.facet(Rn),i=e.annotation(yt);if(i){let a=T.fromTransaction(e,i.selection),c=i.side,f=c==0?t.undone:t.done;return a?f=Ve(f,f.length,n.minDepth,a):f=$n(f,e.startState.selection),new J(c==0?i.rest:f,c==0?f:i.rest)}let o=e.annotation(or);if((o=="full"||o=="before")&&(t=t.isolate()),e.annotation(tt.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let r=T.fromTransaction(e),s=e.annotation(tt.time),l=e.annotation(tt.userEvent);return r?t=t.addChanges(r,s,l,n,e):e.selection&&(t=t.addSelection(e.startState.selection,s,l,n.newGroupDelay)),(o=="full"||o=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new J(t.done.map(T.fromJSON),t.undone.map(T.fromJSON))}});function sr(t={}){return[En,Rn.of(t),x.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?Nn:e.inputType=="historyRedo"?kt:null;return i?(e.preventDefault(),i(n)):!1}})]}function Ke(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let o=n.field(En,!1);if(!o)return!1;let r=o.pop(t,n,e);return r?(i(r),!0):!1}}const Nn=Ke(0,!1),kt=Ke(1,!1),lr=Ke(0,!0),ar=Ke(1,!0);class T{constructor(e,n,i,o,r){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=o,this.selectionsAfter=r}setSelAfter(e){return new T(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(o=>o.toJSON())}}static fromJSON(e){return new T(e.changes&&Di.fromJSON(e.changes),[],e.mapped&&Ti.fromJSON(e.mapped),e.startSelection&&g.fromJSON(e.startSelection),e.selectionsAfter.map(g.fromJSON))}static fromTransaction(e,n){let i=E;for(let o of e.startState.facet(rr)){let r=o(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new T(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,E)}static selection(e){return new T(void 0,E,void 0,void 0,e)}}function Ve(t,e,n,i){let o=e+1>n+20?e-n-1:0,r=t.slice(o,e);return r.push(i),r}function cr(t,e){let n=[],i=!1;return t.iterChangedRanges((o,r)=>n.push(o,r)),e.iterChangedRanges((o,r,s,l)=>{for(let a=0;a<n.length;){let c=n[a++],f=n[a++];l>=c&&s<=f&&(i=!0)}}),i}function fr(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function Un(t,e){return t.length?e.length?t.concat(e):t:e}const E=[],ur=200;function $n(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-ur));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Ve(t,t.length-1,1e9,n.setSelAfter(i)))}else return[T.selection([e])]}function hr(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function at(t,e){if(!t.length)return t;let n=t.length,i=E;for(;n;){let o=dr(t[n-1],e,i);if(o.changes&&!o.changes.empty||o.effects.length){let r=t.slice(0,n);return r[n-1]=o,r}else e=o.mapped,n--,i=o.selectionsAfter}return i.length?[T.selection(i)]:E}function dr(t,e,n){let i=Un(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):E,n);if(!t.changes)return T.selection(i);let o=t.changes.map(e),r=e.mapDesc(t.changes,!0),s=t.mapped?t.mapped.composeDesc(r):r;return new T(o,O.mapEffects(t.effects,e),s,t.startSelection.map(r),i)}const mr=/^(input\.type|delete)($|\.)/;class J{constructor(e,n,i=0,o=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=o}isolate(){return this.prevTime?new J(this.done,this.undone):this}addChanges(e,n,i,o,r){let s=this.done,l=s[s.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||mr.test(i))&&(!l.selectionsAfter.length&&n-this.prevTime<o.newGroupDelay&&o.joinToEvent(r,cr(l.changes,e.changes))||i=="input.type.compose")?s=Ve(s,s.length-1,o.minDepth,new T(e.changes.compose(l.changes),Un(e.effects,l.effects),l.mapped,l.startSelection,E)):s=Ve(s,s.length,o.minDepth,e),new J(s,E,n,i)}addSelection(e,n,i,o){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:E;return r.length>0&&n-this.prevTime<o&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&fr(r[r.length-1],e)?this:new J($n(this.done,e),this.undone,n,i)}addMapping(e){return new J(at(this.done,e),at(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let o=e==0?this.done:this.undone;if(o.length==0)return null;let r=o[o.length-1],s=r.selectionsAfter[0]||n.selection;if(i&&r.selectionsAfter.length)return n.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:yt.of({side:e,rest:hr(o),selection:s}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let l=o.length==1?E:o.slice(0,o.length-1);return r.mapped&&(l=at(l,r.mapped)),n.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:yt.of({side:e,rest:l,selection:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}J.empty=new J(E,E);const pr=[{key:"Mod-z",run:Nn,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:kt,preventDefault:!0},{linux:"Ctrl-Shift-z",run:kt,preventDefault:!0},{key:"Mod-u",run:lr,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:ar,preventDefault:!0}];function de(t,e){return g.create(t.ranges.map(e),t.mainIndex)}function K(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function F({state:t,dispatch:e},n){let i=de(t.selection,n);return i.eq(t.selection,!0)?!1:(e(K(t,i)),!0)}function Qe(t,e){return g.cursor(e?t.to:t.from)}function Fn(t,e){return F(t,n=>n.empty?t.moveByChar(n,e):Qe(n,e))}function A(t){return t.textDirectionAt(t.state.selection.main.head)==Re.LTR}const Hn=t=>Fn(t,!A(t)),Vn=t=>Fn(t,A(t));function Wn(t,e){return F(t,n=>n.empty?t.moveByGroup(n,e):Qe(n,e))}const gr=t=>Wn(t,!A(t)),yr=t=>Wn(t,A(t));function kr(t,e,n){if(e.type.prop(n))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Ye(t,e,n){let i=Bt(t).resolveInner(e.head),o=n?M.closedBy:M.openedBy;for(let a=e.head;;){let c=n?i.childAfter(a):i.childBefore(a);if(!c)break;kr(t,c,o)?i=c:a=n?c.to:c.from}let r=i.type.prop(o),s,l;return r&&(s=n?le(t,i.from,1):le(t,i.to,-1))&&s.matched?l=n?s.end.to:s.end.from:l=n?i.to:i.from,g.cursor(l,n?-1:1)}const br=t=>F(t,e=>Ye(t.state,e,!A(t))),xr=t=>F(t,e=>Ye(t.state,e,A(t)));function jn(t,e){return F(t,n=>{if(!n.empty)return Qe(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const zn=t=>jn(t,!1),qn=t=>jn(t,!0);function Gn(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,o;if(e){for(let r of t.state.facet(x.scrollMargins)){let s=r(t);s!=null&&s.top&&(n=Math.max(s==null?void 0:s.top,n)),s!=null&&s.bottom&&(i=Math.max(s==null?void 0:s.bottom,i))}o=t.scrollDOM.clientHeight-n-i}else o=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,o-5)}}function Jn(t,e){let n=Gn(t),{state:i}=t,o=de(i.selection,s=>s.empty?t.moveVertically(s,e,n.height):Qe(s,e));if(o.eq(i.selection))return!1;let r;if(n.selfScroll){let s=t.coordsAtPos(i.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),a=l.top+n.marginTop,c=l.bottom-n.marginBottom;s&&s.top>a&&s.bottom<c&&(r=x.scrollIntoView(o.main.head,{y:"start",yMargin:s.top-a}))}return t.dispatch(K(i,o),{effects:r}),!0}const zt=t=>Jn(t,!1),bt=t=>Jn(t,!0);function ee(t,e,n){let i=t.lineBlockAt(e.head),o=t.moveToLineBoundary(e,n);if(o.head==e.head&&o.head!=(n?i.to:i.from)&&(o=t.moveToLineBoundary(e,n,!1)),!n&&o.head==i.from&&i.length){let r=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(o=g.cursor(i.from+r))}return o}const Cr=t=>F(t,e=>ee(t,e,!0)),Sr=t=>F(t,e=>ee(t,e,!1)),wr=t=>F(t,e=>ee(t,e,!A(t))),Ar=t=>F(t,e=>ee(t,e,A(t))),vr=t=>F(t,e=>g.cursor(t.lineBlockAt(e.head).from,1)),Br=t=>F(t,e=>g.cursor(t.lineBlockAt(e.head).to,-1));function Dr(t,e,n){let i=!1,o=de(t.selection,r=>{let s=le(t,r.head,-1)||le(t,r.head,1)||r.head>0&&le(t,r.head-1,1)||r.head<t.doc.length&&le(t,r.head+1,-1);if(!s||!s.end)return r;i=!0;let l=s.start.from==r.head?s.end.to:s.end.from;return g.cursor(l)});return i?(e(K(t,o)),!0):!1}const Tr=({state:t,dispatch:e})=>Dr(t,e);function U(t,e){let n=de(t.state.selection,i=>{let o=e(i);return g.range(i.anchor,o.head,o.goalColumn,o.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(K(t.state,n)),!0)}function Kn(t,e){return U(t,n=>t.moveByChar(n,e))}const Qn=t=>Kn(t,!A(t)),Yn=t=>Kn(t,A(t));function Xn(t,e){return U(t,n=>t.moveByGroup(n,e))}const Mr=t=>Xn(t,!A(t)),Or=t=>Xn(t,A(t)),Ir=t=>U(t,e=>Ye(t.state,e,!A(t))),Lr=t=>U(t,e=>Ye(t.state,e,A(t)));function Zn(t,e){return U(t,n=>t.moveVertically(n,e))}const _n=t=>Zn(t,!1),ei=t=>Zn(t,!0);function ti(t,e){return U(t,n=>t.moveVertically(n,e,Gn(t).height))}const qt=t=>ti(t,!1),Gt=t=>ti(t,!0),Pr=t=>U(t,e=>ee(t,e,!0)),Rr=t=>U(t,e=>ee(t,e,!1)),Er=t=>U(t,e=>ee(t,e,!A(t))),Nr=t=>U(t,e=>ee(t,e,A(t))),Ur=t=>U(t,e=>g.cursor(t.lineBlockAt(e.head).from)),$r=t=>U(t,e=>g.cursor(t.lineBlockAt(e.head).to)),Jt=({state:t,dispatch:e})=>(e(K(t,{anchor:0})),!0),Kt=({state:t,dispatch:e})=>(e(K(t,{anchor:t.doc.length})),!0),Qt=({state:t,dispatch:e})=>(e(K(t,{anchor:t.selection.main.anchor,head:0})),!0),Yt=({state:t,dispatch:e})=>(e(K(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Fr=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Hr=({state:t,dispatch:e})=>{let n=Xe(t).map(({from:i,to:o})=>g.range(i,Math.min(o+1,t.doc.length)));return e(t.update({selection:g.create(n),userEvent:"select"})),!0},Vr=({state:t,dispatch:e})=>{let n=de(t.selection,i=>{var o;let r=Bt(t).resolveStack(i.from,1);for(let s=r;s;s=s.next){let{node:l}=s;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&(!((o=l.parent)===null||o===void 0)&&o.parent))return g.range(l.to,l.from)}return i});return e(K(t,n)),!0},Wr=({state:t,dispatch:e})=>{let n=t.selection,i=null;return n.ranges.length>1?i=g.create([n.main]):n.main.empty||(i=g.create([g.cursor(n.main.head)])),i?(e(K(t,i)),!0):!1};function we(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,o=i.changeByRange(r=>{let{from:s,to:l}=r;if(s==l){let a=e(r);a<s?(n="delete.backward",a=Me(t,a,!1)):a>s&&(n="delete.forward",a=Me(t,a,!0)),s=Math.min(s,a),l=Math.max(l,a)}else s=Me(t,s,!1),l=Me(t,l,!0);return s==l?{range:r}:{changes:{from:s,to:l},range:g.cursor(s,s<r.head?-1:1)}});return o.changes.empty?!1:(t.dispatch(i.update(o,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?x.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Me(t,e,n){if(t instanceof x)for(let i of t.state.facet(x.atomicRanges).map(o=>o(t)))i.between(e,e,(o,r)=>{o<e&&r>e&&(e=n?r:o)});return e}const ni=(t,e,n)=>we(t,i=>{let o=i.from,{state:r}=t,s=r.doc.lineAt(o),l,a;if(n&&!e&&o>s.from&&o<s.from+200&&!/[^ \t]/.test(l=s.text.slice(0,o-s.from))){if(l[l.length-1]=="	")return o-1;let c=qe(l,r.tabSize),f=c%ut(r)||ut(r);for(let u=0;u<f&&l[l.length-1-u]==" ";u++)o--;a=o}else a=ke(s.text,o-s.from,e,e)+s.from,a==o&&s.number!=(e?r.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(a-s.from,o-s.from))&&(a=ke(s.text,a-s.from,!1,!1)+s.from);return a}),xt=t=>ni(t,!1,!0),ii=t=>ni(t,!0,!1),oi=(t,e)=>we(t,n=>{let i=n.head,{state:o}=t,r=o.doc.lineAt(i),s=o.charCategorizer(i);for(let l=null;;){if(i==(e?r.to:r.from)){i==n.head&&r.number!=(e?o.doc.lines:1)&&(i+=e?1:-1);break}let a=ke(r.text,i-r.from,e)+r.from,c=r.text.slice(Math.min(i,a)-r.from,Math.max(i,a)-r.from),f=s(c);if(l!=null&&f!=l)break;(c!=" "||i!=n.head)&&(l=f),i=a}return i}),ri=t=>oi(t,!1),jr=t=>oi(t,!0),zr=t=>we(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),qr=t=>we(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),Gr=t=>we(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Jr=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:hn.of(["",""])},range:g.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Kr=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let o=i.from,r=t.doc.lineAt(o),s=o==r.from?o-1:ke(r.text,o-r.from,!1)+r.from,l=o==r.to?o+1:ke(r.text,o-r.from,!0)+r.from;return{changes:{from:s,to:l,insert:t.doc.slice(o,l).append(t.doc.slice(s,o))},range:g.cursor(l)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Xe(t){let e=[],n=-1;for(let i of t.selection.ranges){let o=t.doc.lineAt(i.from),r=t.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=t.doc.lineAt(i.to-1)),n>=o.number){let s=e[e.length-1];s.to=r.to,s.ranges.push(i)}else e.push({from:o.from,to:r.to,ranges:[i]});n=r.number+1}return e}function si(t,e,n){if(t.readOnly)return!1;let i=[],o=[];for(let r of Xe(t)){if(n?r.to==t.doc.length:r.from==0)continue;let s=t.doc.lineAt(n?r.to+1:r.from-1),l=s.length+1;if(n){i.push({from:r.to,to:s.to},{from:r.from,insert:s.text+t.lineBreak});for(let a of r.ranges)o.push(g.range(Math.min(t.doc.length,a.anchor+l),Math.min(t.doc.length,a.head+l)))}else{i.push({from:s.from,to:r.from},{from:r.to,insert:t.lineBreak+s.text});for(let a of r.ranges)o.push(g.range(a.anchor-l,a.head-l))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:g.create(o,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Qr=({state:t,dispatch:e})=>si(t,e,!1),Yr=({state:t,dispatch:e})=>si(t,e,!0);function li(t,e,n){if(t.readOnly)return!1;let i=[];for(let o of Xe(t))n?i.push({from:o.from,insert:t.doc.slice(o.from,o.to)+t.lineBreak}):i.push({from:o.to,insert:t.lineBreak+t.doc.slice(o.from,o.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Xr=({state:t,dispatch:e})=>li(t,e,!1),Zr=({state:t,dispatch:e})=>li(t,e,!0),_r=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Xe(e).map(({from:o,to:r})=>(o>0?o--:r<e.doc.length&&r++,{from:o,to:r}))),i=de(e.selection,o=>{let r;if(t.lineWrapping){let s=t.lineBlockAt(o.head),l=t.coordsAtPos(o.head,o.assoc||1);l&&(r=s.bottom+t.documentTop-l.bottom+t.defaultLineHeight/2)}return t.moveVertically(o,!0,r)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function es(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Bt(t).resolveInner(e),i=n.childBefore(e),o=n.childAfter(e),r;return i&&o&&i.to<=e&&o.from>=e&&(r=i.type.prop(M.closedBy))&&r.indexOf(o.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(o.from).from&&!/\S/.test(t.sliceDoc(i.to,o.from))?{from:i.to,to:o.from}:null}const ts=ai(!1),ns=ai(!0);function ai(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(o=>{let{from:r,to:s}=o,l=e.doc.lineAt(r),a=!t&&r==s&&es(e,r);t&&(r=s=(s<=l.to?l:e.doc.lineAt(s)).to);let c=new fn(e,{simulateBreak:r,simulateDoubleBreak:!!a}),f=un(c,r);for(f==null&&(f=qe(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));s<l.to&&/\s/.test(l.text[s-l.from]);)s++;a?{from:r,to:s}=a:r>l.from&&r<l.from+100&&!/\S/.test(l.text.slice(0,r))&&(r=l.from);let u=["",Ee(e,f)];return a&&u.push(Ee(e,c.lineIndent(l.from,-1))),{changes:{from:r,to:s,insert:hn.of(u)},range:g.cursor(r+1+u[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Ot(t,e){let n=-1;return t.changeByRange(i=>{let o=[];for(let s=i.from;s<=i.to;){let l=t.doc.lineAt(s);l.number>n&&(i.empty||i.to>l.from)&&(e(l,o,i),n=l.number),s=l.to+1}let r=t.changes(o);return{changes:o,range:g.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const is=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),i=new fn(t,{overrideIndentation:r=>{let s=n[r];return s??-1}}),o=Ot(t,(r,s,l)=>{let a=un(i,r.from);if(a==null)return;/\S/.test(r.text)||(a=0);let c=/^\s*/.exec(r.text)[0],f=Ee(t,a);(c!=f||l.from<r.from+c.length)&&(n[r.from]=a,s.push({from:r.from,to:r.from+c.length,insert:f}))});return o.changes.empty||e(t.update(o,{userEvent:"indent"})),!0},os=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Ot(t,(n,i)=>{i.push({from:n.from,insert:t.facet(Mi)})}),{userEvent:"input.indent"})),!0),rs=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Ot(t,(n,i)=>{let o=/^\s*/.exec(n.text)[0];if(!o)return;let r=qe(o,t.tabSize),s=0,l=Ee(t,Math.max(0,r-ut(t)));for(;s<o.length&&s<l.length&&o.charCodeAt(s)==l.charCodeAt(s);)s++;i.push({from:n.from+s,to:n.from+o.length,insert:l.slice(s)})}),{userEvent:"delete.dedent"})),!0),ss=[{key:"Ctrl-b",run:Hn,shift:Qn,preventDefault:!0},{key:"Ctrl-f",run:Vn,shift:Yn},{key:"Ctrl-p",run:zn,shift:_n},{key:"Ctrl-n",run:qn,shift:ei},{key:"Ctrl-a",run:vr,shift:Ur},{key:"Ctrl-e",run:Br,shift:$r},{key:"Ctrl-d",run:ii},{key:"Ctrl-h",run:xt},{key:"Ctrl-k",run:zr},{key:"Ctrl-Alt-h",run:ri},{key:"Ctrl-o",run:Jr},{key:"Ctrl-t",run:Kr},{key:"Ctrl-v",run:bt}],ls=[{key:"ArrowLeft",run:Hn,shift:Qn,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:gr,shift:Mr,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:wr,shift:Er,preventDefault:!0},{key:"ArrowRight",run:Vn,shift:Yn,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:yr,shift:Or,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Ar,shift:Nr,preventDefault:!0},{key:"ArrowUp",run:zn,shift:_n,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Jt,shift:Qt},{mac:"Ctrl-ArrowUp",run:zt,shift:qt},{key:"ArrowDown",run:qn,shift:ei,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Kt,shift:Yt},{mac:"Ctrl-ArrowDown",run:bt,shift:Gt},{key:"PageUp",run:zt,shift:qt},{key:"PageDown",run:bt,shift:Gt},{key:"Home",run:Sr,shift:Rr,preventDefault:!0},{key:"Mod-Home",run:Jt,shift:Qt},{key:"End",run:Cr,shift:Pr,preventDefault:!0},{key:"Mod-End",run:Kt,shift:Yt},{key:"Enter",run:ts},{key:"Mod-a",run:Fr},{key:"Backspace",run:xt,shift:xt},{key:"Delete",run:ii},{key:"Mod-Backspace",mac:"Alt-Backspace",run:ri},{key:"Mod-Delete",mac:"Alt-Delete",run:jr},{mac:"Mod-Backspace",run:qr},{mac:"Mod-Delete",run:Gr}].concat(ss.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),as=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:br,shift:Ir},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:xr,shift:Lr},{key:"Alt-ArrowUp",run:Qr},{key:"Shift-Alt-ArrowUp",run:Xr},{key:"Alt-ArrowDown",run:Yr},{key:"Shift-Alt-ArrowDown",run:Zr},{key:"Escape",run:Wr},{key:"Mod-Enter",run:ns},{key:"Alt-l",mac:"Ctrl-l",run:Hr},{key:"Mod-i",run:Vr,preventDefault:!0},{key:"Mod-[",run:rs},{key:"Mod-]",run:os},{key:"Mod-Alt-\\",run:is},{key:"Shift-Mod-k",run:_r},{key:"Shift-Mod-\\",run:Tr},{key:"Mod-/",run:Xo},{key:"Alt-A",run:_o}].concat(ls);class ci{constructor(e,n,i){this.state=e,this.pos=n,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let n=L(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),o=n.text.slice(i-n.from,this.pos-n.from),r=o.search(fi(e,!1));return r<0?null:{from:i+r,to:this.pos,text:o.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function Xt(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function cs(t){let e=Object.create(null),n=Object.create(null);for(let{label:o}of t){e[o[0]]=!0;for(let r=1;r<o.length;r++)n[o[r]]=!0}let i=Xt(e)+Xt(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function fs(t){let e=t.map(o=>typeof o=="string"?{label:o}:o),[n,i]=e.every(o=>/^\w+$/.test(o.label))?[/\w*$/,/\w+$/]:cs(e);return o=>{let r=o.matchBefore(i);return r||o.explicit?{from:r?r.from:o.pos,options:e,validFor:n}:null}}class Zt{constructor(e,n,i,o){this.completion=e,this.source=n,this.match=i,this.score=o}}function Z(t){return t.selection.main.from}function fi(t,e){var n;let{source:i}=t,o=e&&i[0]!="^",r=i[i.length-1]!="$";return!o&&!r?t:new RegExp(`${o?"^":""}(?:${i})${r?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const ui=vt.define();function us(t,e,n,i){let{main:o}=t.selection,r=n-o.from,s=i-o.from;return Object.assign(Object.assign({},t.changeByRange(l=>l!=o&&n!=i&&t.sliceDoc(l.from+r,l.from+s)!=t.sliceDoc(n,i)?{range:l}:{changes:{from:l.from+r,to:i==o.from?l.to:l.from+s,insert:e},range:g.cursor(l.from+r+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const _t=new WeakMap;function hs(t){if(!Array.isArray(t))return t;let e=_t.get(t);return e||_t.set(t,e=fs(t)),e}const We=O.define(),be=O.define();class ds{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=$(e,n),o=X(i);this.chars.push(i);let r=e.slice(n,n+o),s=r.toUpperCase();this.folded.push($(s==r?r.toLowerCase():s,0)),n+=o}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:o,precise:r,byWord:s}=this;if(n.length==1){let k=$(e,0),H=X(k),R=H==e.length?0:-100;if(k!=n[0])if(k==i[0])R+=-200;else return null;return this.ret(R,[0,H])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=n.length,c=0;if(l<0){for(let k=0,H=Math.min(e.length,200);k<H&&c<a;){let R=$(e,k);(R==n[c]||R==i[c])&&(o[c++]=k),k+=X(R)}if(c<a)return null}let f=0,u=0,h=!1,p=0,y=-1,b=-1,P=/[a-z]/.test(e),v=!0;for(let k=0,H=Math.min(e.length,200),R=0;k<H&&u<a;){let C=$(e,k);l<0&&(f<a&&C==n[f]&&(r[f++]=k),p<a&&(C==n[p]||C==i[p]?(p==0&&(y=k),b=k+1,p++):p=0));let Ae,et=C<255?C>=48&&C<=57||C>=97&&C<=122?2:C>=65&&C<=90?1:0:(Ae=pn(C))!=Ae.toLowerCase()?1:Ae!=Ae.toUpperCase()?2:0;(!k||et==1&&P||R==0&&et!=0)&&(n[u]==C||i[u]==C&&(h=!0)?s[u++]=k:s.length&&(v=!1)),R=et,k+=X(C)}return u==a&&s[0]==0&&v?this.result(-100+(h?-200:0),s,e):p==a&&y==0?this.ret(-200-e.length+(b==e.length?0:-100),[0,b]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):p==a?this.ret(-900-e.length,[y,b]):u==a?this.result(-100+(h?-200:0)+-700+(v?0:-1100),s,e):n.length==2?null:this.result((o[0]?-700:0)+-200+-1100,o,e)}result(e,n,i){let o=[],r=0;for(let s of n){let l=s+(this.astral?X($(i,s)):1);r&&o[r-1]==s?o[r-1]=l:(o[r++]=s,o[r++]=l)}return this.ret(e-i.length,o)}}class ms{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const w=N.define({combine(t){return Ce(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:ps,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>en(e(i),n(i)),optionClass:(e,n)=>i=>en(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function en(t,e){return t?e?t+" "+e:t:e}function ps(t,e,n,i,o,r){let s=t.textDirection==Re.RTL,l=s,a=!1,c="top",f,u,h=e.left-o.left,p=o.right-e.right,y=i.right-i.left,b=i.bottom-i.top;if(l&&h<Math.min(y,p)?l=!1:!l&&p<Math.min(y,h)&&(l=!0),y<=(l?h:p))f=Math.max(o.top,Math.min(n.top,o.bottom-b))-e.top,u=Math.min(400,l?h:p);else{a=!0,u=Math.min(400,(s?e.right:o.right-e.left)-30);let k=o.bottom-e.bottom;k>=b||k>e.top?f=n.bottom-e.top:(c="bottom",f=e.bottom-n.top)}let P=(e.bottom-e.top)/r.offsetHeight,v=(e.right-e.left)/r.offsetWidth;return{style:`${c}: ${f/P}px; max-width: ${u/v}px`,class:"cm-completionInfo-"+(a?s?"left-narrow":"right-narrow":l?"left":"right")}}function gs(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(o=>"cm-completionIcon-"+o)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,o,r){let s=document.createElement("span");s.className="cm-completionLabel";let l=n.displayLabel||n.label,a=0;for(let c=0;c<r.length;){let f=r[c++],u=r[c++];f>a&&s.appendChild(document.createTextNode(l.slice(a,f)));let h=s.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(l.slice(f,u))),h.className="cm-completionMatchedText",a=u}return a<l.length&&s.appendChild(document.createTextNode(l.slice(a))),s},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function ct(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let o=Math.floor(e/n);return{from:o*n,to:(o+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class ys{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let o=e.state.field(n),{options:r,selected:s}=o.open,l=e.state.facet(w);this.optionContent=gs(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=ct(r.length,s,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:c}=e.state.field(n).open;for(let f=a.target,u;f&&f!=this.dom;f=f.parentNode)if(f.nodeName=="LI"&&(u=/-(\d+)$/.exec(f.id))&&+u[1]<c.length){this.applyCompletion(e,c[+u[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(w).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:be.of(null)})}),this.showOptions(r,o.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),o=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=o){let{options:r,selected:s,disabled:l}=i.open;(!o.open||o.open.options!=r)&&(this.range=ct(r.length,s,e.state.facet(w).maxRenderedOptions),this.showOptions(r,i.id)),this.updateSel(),l!=((n=o.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=ct(n.options.length,n.selected,this.view.state.facet(w).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:o}=i;if(!o)return;let r=typeof o=="string"?document.createTextNode(o):o(i);if(!r)return;"then"in r?r.then(s=>{s&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(s,i)}).catch(s=>Pe(this.view.state,s,"completion info")):this.addInfoPane(r,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:o,destroy:r}=e;i.appendChild(o),this.infoDestroy=r||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,o=this.range.from;i;i=i.nextSibling,o++)i.nodeName!="LI"||!i.id?o--:o==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&bs(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),o=e.getBoundingClientRect(),r=this.space;if(!r){let s=this.dom.ownerDocument.defaultView||window;r={left:0,top:0,right:s.innerWidth,bottom:s.innerHeight}}return o.top>Math.min(r.bottom,n.bottom)-10||o.bottom<Math.max(r.top,n.top)+10?null:this.view.state.facet(w).positionInfo(this.view,n,o,i,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const o=document.createElement("ul");o.id=n,o.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-label",this.view.state.phrase("Completions"));let r=null;for(let s=i.from;s<i.to;s++){let{completion:l,match:a}=e[s],{section:c}=l;if(c){let h=typeof c=="string"?c:c.name;if(h!=r&&(s>i.from||i.from==0))if(r=h,typeof c!="string"&&c.header)o.appendChild(c.header(c));else{let p=o.appendChild(document.createElement("completion-section"));p.textContent=h}}const f=o.appendChild(document.createElement("li"));f.id=n+"-"+s,f.setAttribute("role","option");let u=this.optionClass(l);u&&(f.className=u);for(let h of this.optionContent){let p=h(l,this.view.state,this.view,a);p&&f.appendChild(p)}}return i.from&&o.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&o.classList.add("cm-completionListIncompleteBottom"),o}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function ks(t,e){return n=>new ys(n,t,e)}function bs(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),o=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/o:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/o)}function tn(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function xs(t,e){let n=[],i=null,o=c=>{n.push(c);let{section:f}=c.completion;if(f){i||(i=[]);let u=typeof f=="string"?f:f.name;i.some(h=>h.name==u)||i.push(typeof f=="string"?{name:u}:f)}},r=e.facet(w);for(let c of t)if(c.hasResult()){let f=c.result.getMatch;if(c.result.filter===!1)for(let u of c.result.options)o(new Zt(u,c.source,f?f(u):[],1e9-n.length));else{let u=e.sliceDoc(c.from,c.to),h,p=r.filterStrict?new ms(u):new ds(u);for(let y of c.result.options)if(h=p.match(y.label)){let b=y.displayLabel?f?f(y,h.matched):[]:h.matched;o(new Zt(y,c.source,b,h.score+(y.boost||0)))}}}if(i){let c=Object.create(null),f=0,u=(h,p)=>{var y,b;return((y=h.rank)!==null&&y!==void 0?y:1e9)-((b=p.rank)!==null&&b!==void 0?b:1e9)||(h.name<p.name?-1:1)};for(let h of i.sort(u))f-=1e5,c[h.name]=f;for(let h of n){let{section:p}=h.completion;p&&(h.score+=c[typeof p=="string"?p:p.name])}}let s=[],l=null,a=r.compareCompletions;for(let c of n.sort((f,u)=>u.score-f.score||a(f.completion,u.completion))){let f=c.completion;!l||l.label!=f.label||l.detail!=f.detail||l.type!=null&&f.type!=null&&l.type!=f.type||l.apply!=f.apply||l.boost!=f.boost?s.push(c):tn(c.completion)>tn(l)&&(s[s.length-1]=c),l=c.completion}return s}class ae{constructor(e,n,i,o,r,s){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=o,this.selected=r,this.disabled=s}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new ae(this.options,nn(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,o,r){let s=xs(e,n);if(!s.length)return o&&e.some(a=>a.state==1)?new ae(o.options,o.attrs,o.tooltip,o.timestamp,o.selected,!0):null;let l=n.facet(w).selectOnOpen?0:-1;if(o&&o.selected!=l&&o.selected!=-1){let a=o.options[o.selected].completion;for(let c=0;c<s.length;c++)if(s[c].completion==a){l=c;break}}return new ae(s,nn(i,l),{pos:e.reduce((a,c)=>c.hasResult()?Math.min(a,c.from):a,1e8),create:vs,above:r.aboveCursor},o?o.timestamp:Date.now(),l,!1)}map(e){return new ae(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class je{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new je(ws,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(w),r=(i.override||n.languageDataAt("autocomplete",Z(n)).map(hs)).map(l=>(this.active.find(c=>c.source==l)||new B(l,this.active.some(c=>c.state!=0)?1:0)).update(e,i));r.length==this.active.length&&r.every((l,a)=>l==this.active[a])&&(r=this.active);let s=this.open;s&&e.docChanged&&(s=s.map(e.changes)),e.selection||r.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!Cs(r,this.active)?s=ae.build(r,n,this.id,s,i):s&&s.disabled&&!r.some(l=>l.state==1)&&(s=null),!s&&r.every(l=>l.state!=1)&&r.some(l=>l.hasResult())&&(r=r.map(l=>l.hasResult()?new B(l.source,0):l));for(let l of e.effects)l.is(di)&&(s=s&&s.setSelected(l.value,this.id));return r==this.active&&s==this.open?this:new je(r,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:Ss}}function Cs(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;i<e.length&&!e[i].hasResult;)i++;let o=n==t.length,r=i==e.length;if(o||r)return o==r;if(t[n++].result!=e[i++].result)return!1}}const Ss={"aria-autocomplete":"list"};function nn(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const ws=[];function Ct(t,e){if(t.isUserEvent("input.complete")){let n=t.annotation(ui);if(n&&e.activateOnCompletion(n))return"input"}return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class B{constructor(e,n,i=-1){this.source=e,this.state=n,this.explicitPos=i}hasResult(){return!1}update(e,n){let i=Ct(e,n),o=this;i?o=o.handleUserEvent(e,i,n):e.docChanged?o=o.handleChange(e):e.selection&&o.state!=0&&(o=new B(o.source,0));for(let r of e.effects)if(r.is(We))o=new B(o.source,1,r.value?Z(e.state):-1);else if(r.is(be))o=new B(o.source,0);else if(r.is(hi))for(let s of r.value)s.source==o.source&&(o=s);return o}handleUserEvent(e,n,i){return n=="delete"||!i.activateOnTyping?this.map(e.changes):new B(this.source,1)}handleChange(e){return e.changes.touchesRange(Z(e.startState))?new B(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new B(this.source,this.state,e.mapPos(this.explicitPos))}}class fe extends B{constructor(e,n,i,o,r){super(e,2,n),this.result=i,this.from=o,this.to=r}hasResult(){return!0}handleUserEvent(e,n,i){var o;let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),l=e.changes.mapPos(this.to,1),a=Z(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>l||!r||n=="delete"&&Z(e.startState)==this.from)return new B(this.source,n=="input"&&i.activateOnTyping?1:0);let c=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return As(r.validFor,e.state,s,l)?new fe(this.source,c,r,s,l):r.update&&(r=r.update(r,s,l,new ci(e.state,a,c>=0)))?new fe(this.source,c,r,r.from,(o=r.to)!==null&&o!==void 0?o:Z(e.state)):new B(this.source,1,c)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new B(this.source,0):this.map(e.changes)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new fe(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new B(this.source,0)}}function As(t,e,n,i){if(!t)return!1;let o=e.sliceDoc(n,i);return typeof t=="function"?t(o,n,i,e):fi(t,!0).test(o)}const hi=O.define({map(t,e){return t.map(n=>n.map(e))}}),di=O.define(),D=re.define({create(){return je.start()},update(t,e){return t.update(e)},provide:t=>[Oi.from(t,e=>e.tooltip),x.contentAttributes.from(t,e=>e.attrs)]});function It(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(D).active.find(o=>o.source==e.source);return i instanceof fe?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},us(t.state,n,i.from,i.to)),{annotations:ui.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const vs=ks(D,It);function Oe(t,e="option"){return n=>{let i=n.state.field(D,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(w).interactionDelay)return!1;let o=1,r;e=="page"&&(r=dn(n,i.open.tooltip))&&(o=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:s}=i.open.options,l=i.open.selected>-1?i.open.selected+o*(t?1:-1):t?0:s-1;return l<0?l=e=="page"?0:s-1:l>=s&&(l=e=="page"?s-1:0),n.dispatch({effects:di.of(l)}),!0}}const Bs=t=>{let e=t.state.field(D,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(w).interactionDelay?!1:It(t,e.open.options[e.open.selected])},Ds=t=>t.state.field(D,!1)?(t.dispatch({effects:We.of(!0)}),!0):!1,Ts=t=>{let e=t.state.field(D,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:be.of(null)}),!0)};class Ms{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const Os=50,Is=1e3,Ls=ze.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(D).active)e.state==1&&this.startQuery(e)}update(t){let e=t.state.field(D),n=t.state.facet(w);if(!t.selectionSet&&!t.docChanged&&t.startState.field(D)==e)return;let i=t.transactions.some(r=>(r.selection||r.docChanged)&&!Ct(r,n));for(let r=0;r<this.running.length;r++){let s=this.running[r];if(i||s.updates.length+t.transactions.length>Os&&Date.now()-s.time>Is){for(let l of s.context.abortListeners)try{l()}catch(a){Pe(this.view.state,a)}s.context.abortListeners=null,this.running.splice(r--,1)}else s.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(r=>r.effects.some(s=>s.is(We)))&&(this.pendingStart=!0);let o=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(r=>r.state==1&&!this.running.some(s=>s.active.source==r.source))?setTimeout(()=>this.startUpdate(),o):-1,this.composing!=0)for(let r of t.transactions)Ct(r,n)=="input"?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(D);for(let n of e.active)n.state==1&&!this.running.some(i=>i.active.source==n.source)&&this.startQuery(n)}startQuery(t){let{state:e}=this.view,n=Z(e),i=new ci(e,n,t.explicitPos==n),o=new Ms(t,i);this.running.push(o),Promise.resolve(t.source(i)).then(r=>{o.context.aborted||(o.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:be.of(null)}),Pe(this.view.state,r)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(w).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(w);for(let i=0;i<this.running.length;i++){let o=this.running[i];if(o.done===void 0)continue;if(this.running.splice(i--,1),o.done){let s=new fe(o.active.source,o.active.explicitPos,o.done,o.done.from,(t=o.done.to)!==null&&t!==void 0?t:Z(o.updates.length?o.updates[0].startState:this.view.state));for(let l of o.updates)s=s.update(l,n);if(s.hasResult()){e.push(s);continue}}let r=this.view.state.field(D).active.find(s=>s.source==o.active.source);if(r&&r.state==1)if(o.done==null){let s=new B(o.active.source,0);for(let l of o.updates)s=s.update(l,n);s.state!=1&&e.push(s)}else this.startQuery(r)}e.length&&this.view.dispatch({effects:hi.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(D,!1);if(e&&e.tooltip&&this.view.state.facet(w).closeOnBlur){let n=e.open&&dn(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:be.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:We.of(!1)}),20),this.composing=0}}}),Ps=typeof navigator=="object"&&/Win/.test(navigator.platform),Rs=St.highest(x.domEventHandlers({keydown(t,e){let n=e.state.field(D,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(Ps&&t.altKey)||t.metaKey)return!1;let i=n.open.options[n.open.selected],o=n.active.find(s=>s.source==i.source),r=i.completion.commitCharacters||o.result.commitCharacters;return r&&r.indexOf(t.key)>-1&&It(e,i),!1}})),Es=x.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),xe={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},ie=O.define({map(t,e){let n=e.mapPos(t,-1,Ii.TrackAfter);return n??void 0}}),Lt=new class extends Li{};Lt.startSide=1;Lt.endSide=-1;const mi=re.define({create(){return cn.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:i=>i>=n.from&&i<=n.to})}for(let n of e.effects)n.is(ie)&&(t=t.update({add:[Lt.range(n.value,n.value+1)]}));return t}});function Ns(){return[$s,mi]}const ft="()[]{}<>";function pi(t){for(let e=0;e<ft.length;e+=2)if(ft.charCodeAt(e)==t)return ft.charAt(e+1);return pn(t<128?t:t+1)}function gi(t,e){return t.languageDataAt("closeBrackets",e)[0]||xe}const Us=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),$s=x.inputHandler.of((t,e,n,i)=>{if((Us?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let o=t.state.selection.main;if(i.length>2||i.length==2&&X($(i,0))==1||e!=o.from||n!=o.to)return!1;let r=Vs(t.state,i);return r?(t.dispatch(r),!0):!1}),Fs=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=gi(t,t.selection.main.head).brackets||xe.brackets,o=null,r=t.changeByRange(s=>{if(s.empty){let l=Ws(t.doc,s.head);for(let a of i)if(a==l&&Ze(t.doc,s.head)==pi($(a,0)))return{changes:{from:s.head-a.length,to:s.head+a.length},range:g.cursor(s.head-a.length)}}return{range:o=s}});return o||e(t.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!o},Hs=[{key:"Backspace",run:Fs}];function Vs(t,e){let n=gi(t,t.selection.main.head),i=n.brackets||xe.brackets;for(let o of i){let r=pi($(o,0));if(e==o)return r==o?qs(t,o,i.indexOf(o+o+o)>-1,n):js(t,o,r,n.before||xe.before);if(e==r&&yi(t,t.selection.main.from))return zs(t,o,r)}return null}function yi(t,e){let n=!1;return t.field(mi).between(0,t.doc.length,i=>{i==e&&(n=!0)}),n}function Ze(t,e){let n=t.sliceString(e,e+2);return n.slice(0,X($(n,0)))}function Ws(t,e){let n=t.sliceString(e-2,e);return X($(n,0))==n.length?n:n.slice(1)}function js(t,e,n,i){let o=null,r=t.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:n,from:s.to}],effects:ie.of(s.to+e.length),range:g.range(s.anchor+e.length,s.head+e.length)};let l=Ze(t.doc,s.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+n,from:s.head},effects:ie.of(s.head+e.length),range:g.cursor(s.head+e.length)}:{range:o=s}});return o?null:t.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function zs(t,e,n){let i=null,o=t.changeByRange(r=>r.empty&&Ze(t.doc,r.head)==n?{changes:{from:r.head,to:r.head+n.length,insert:n},range:g.cursor(r.head+n.length)}:i={range:r});return i?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function qs(t,e,n,i){let o=i.stringPrefixes||xe.stringPrefixes,r=null,s=t.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:ie.of(l.to+e.length),range:g.range(l.anchor+e.length,l.head+e.length)};let a=l.head,c=Ze(t.doc,a),f;if(c==e){if(on(t,a))return{changes:{insert:e+e,from:a},effects:ie.of(a+e.length),range:g.cursor(a+e.length)};if(yi(t,a)){let h=n&&t.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+h.length,insert:h},range:g.cursor(a+h.length)}}}else{if(n&&t.sliceDoc(a-2*e.length,a)==e+e&&(f=rn(t,a-2*e.length,o))>-1&&on(t,f))return{changes:{insert:e+e+e+e,from:a},effects:ie.of(a+e.length),range:g.cursor(a+e.length)};if(t.charCategorizer(a)(c)!=ht.Word&&rn(t,a,o)>-1&&!Gs(t,a,e,o))return{changes:{insert:e+e,from:a},effects:ie.of(a+e.length),range:g.cursor(a+e.length)}}return{range:r=l}});return r?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function on(t,e){let n=L(t).resolveInner(e+1);return n.parent&&n.from==e}function Gs(t,e,n,i){let o=L(t).resolveInner(e,-1),r=i.reduce((s,l)=>Math.max(s,l.length),0);for(let s=0;s<5;s++){let l=t.sliceDoc(o.from,Math.min(o.to,o.from+n.length+r)),a=l.indexOf(n);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let f=o.firstChild;for(;f&&f.from==o.from&&f.to-f.from>n.length+a;){if(t.sliceDoc(f.to-n.length,f.to)==n)return!1;f=f.firstChild}return!0}let c=o.to==e&&o.parent;if(!c)break;o=c}return!1}function rn(t,e,n){let i=t.charCategorizer(e);if(i(t.sliceDoc(e-1,e))!=ht.Word)return e;for(let o of n){let r=e-o.length;if(t.sliceDoc(r,e)==o&&i(t.sliceDoc(r-1,r))!=ht.Word)return r}return-1}function Js(t={}){return[Rs,D,w.of(t),Ls,Ks,Es]}const ki=[{key:"Ctrl-Space",run:Ds},{key:"Escape",run:Ts},{key:"ArrowDown",run:Oe(!0)},{key:"ArrowUp",run:Oe(!1)},{key:"PageDown",run:Oe(!0,"page")},{key:"PageUp",run:Oe(!1,"page")},{key:"Enter",run:Bs}],Ks=St.highest(mn.computeN([w],t=>t.facet(w).defaultKeymap?[ki]:[]));class Qs{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class ne{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let o=e,r=i.facet(Rt).markerFilter;r&&(o=r(o,i));let s=S.set(o.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?S.widget({widget:new ol(l),diagnostic:l}).range(l.from):S.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l,inclusive:!0}).range(l.from,l.to)),!0);return new ne(s,n,he(s))}}function he(t,e=null,n=0){let i=null;return t.between(n,1e9,(o,r,{spec:s})=>{if(!(e&&s.diagnostic!=e))return i=new Qs(o,r,s.diagnostic),!1}),i}function Ys(t,e){let n=e.pos,i=e.end||n,o=t.state.facet(Rt).hideOn(t,n,i);if(o!=null)return o;let r=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(s=>s.is(bi))||t.changes.touchesRange(r.from,Math.max(r.to,i)))}function Xs(t,e){return t.field(I,!1)?e:e.concat(O.appendConfig.of(ll))}const bi=O.define(),Pt=O.define(),xi=O.define(),I=re.define({create(){return new ne(S.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),i=null;if(t.selected){let o=e.changes.mapPos(t.selected.from,1);i=he(n,t.selected.diagnostic,o)||he(n,null,o)}t=new ne(n,t.panel,i)}for(let n of e.effects)n.is(bi)?t=ne.init(n.value,t.panel,e.state):n.is(Pt)?t=new ne(t.diagnostics,n.value?_e.open:null,t.selected):n.is(xi)&&(t=new ne(t.diagnostics,t.panel,n.value));return t},provide:t=>[Ri.from(t,e=>e.panel),x.decorations.from(t,e=>e.diagnostics)]}),Zs=S.mark({class:"cm-lintRange cm-lintRange-active",inclusive:!0});function _s(t,e,n){let{diagnostics:i}=t.state.field(I),o=[],r=2e8,s=0;i.between(e-(n<0?1:0),e+(n>0?1:0),(a,c,{spec:f})=>{e>=a&&e<=c&&(a==c||(e>a||n>0)&&(e<c||n<0))&&(o.push(f.diagnostic),r=Math.min(a,r),s=Math.max(c,s))});let l=t.state.facet(Rt).tooltipFilter;return l&&(o=l(o,t.state)),o.length?{pos:r,end:s,above:t.state.doc.lineAt(r).to<s,create(){return{dom:el(t,o)}}}:null}function el(t,e){return q("ul",{class:"cm-tooltip-lint"},e.map(n=>Si(t,n,!1)))}const tl=t=>{let e=t.state.field(I,!1);(!e||!e.panel)&&t.dispatch({effects:Xs(t.state,[Pt.of(!0)])});let n=Pi(t,_e.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},sn=t=>{let e=t.state.field(I,!1);return!e||!e.panel?!1:(t.dispatch({effects:Pt.of(!1)}),!0)},nl=t=>{let e=t.state.field(I,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},il=[{key:"Mod-Shift-m",run:tl,preventDefault:!0},{key:"F8",run:nl}],Rt=N.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},Ce(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function Ci(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let o=n[i];if(/[a-zA-Z]/.test(o)&&!e.some(r=>r.toLowerCase()==o.toLowerCase())){e.push(o);continue e}}e.push("")}return e}function Si(t,e,n){var i;let o=n?Ci(e.actions):[];return q("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},q("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,s)=>{let l=!1,a=h=>{if(h.preventDefault(),l)return;l=!0;let p=he(t.state.field(I).diagnostics,e);p&&r.apply(t,p.from,p.to)},{name:c}=r,f=o[s]?c.indexOf(o[s]):-1,u=f<0?c:[c.slice(0,f),q("u",c.slice(f,f+1)),c.slice(f+1)];return q("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${c}${f<0?"":` (access key "${o[s]})"`}.`},u)}),e.source&&q("div",{class:"cm-diagnosticSource"},e.source))}class ol extends wt{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return q("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class ln{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Si(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class _e{constructor(e){this.view=e,this.items=[];let n=o=>{if(o.keyCode==27)sn(this.view),this.view.focus();else if(o.keyCode==38||o.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(o.keyCode==40||o.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(o.keyCode==36)this.moveSelection(0);else if(o.keyCode==35)this.moveSelection(this.items.length-1);else if(o.keyCode==13)this.view.focus();else if(o.keyCode>=65&&o.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],s=Ci(r.actions);for(let l=0;l<s.length;l++)if(s[l].toUpperCase().charCodeAt(0)==o.keyCode){let a=he(this.view.state.field(I).diagnostics,r);a&&r.actions[l].apply(e,a.from,a.to)}}else return;o.preventDefault()},i=o=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(o.target)&&this.moveSelection(r)};this.list=q("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=q("div",{class:"cm-panel-lint"},this.list,q("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>sn(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(I).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(I),i=0,o=!1,r=null;for(e.between(0,this.view.state.doc.length,(s,l,{spec:a})=>{let c=-1,f;for(let u=i;u<this.items.length;u++)if(this.items[u].diagnostic==a.diagnostic){c=u;break}c<0?(f=new ln(this.view,a.diagnostic),this.items.splice(i,0,f),o=!0):(f=this.items[c],c>i&&(this.items.splice(i,c-i),o=!0)),n&&f.diagnostic==n.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),r=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();this.items.length==0&&(this.items.push(new ln(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:l})=>{let a=l.height/this.list.offsetHeight;s.top<l.top?this.list.scrollTop-=(l.top-s.top)/a:s.bottom>l.bottom&&(this.list.scrollTop+=(s.bottom-l.bottom)/a)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(I),i=he(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:xi.of(i)})}static open(e){return new _e(e)}}function rl(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Ie(t){return rl(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const sl=x.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Ie("#d11")},".cm-lintRange-warning":{backgroundImage:Ie("orange")},".cm-lintRange-info":{backgroundImage:Ie("#999")},".cm-lintRange-hint":{backgroundImage:Ie("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),ll=[I,x.decorations.compute([I],t=>{let{selected:e,panel:n}=t.field(I);return!e||!n||e.from==e.to?S.none:S.set([Zs.range(e.from,e.to)])}),Ei(_s,{hideOn:Ys}),sl],fl=[Ni(),Ui(),$i(),sr(),Lo(),Fi(),Hi(),ce.allowMultipleSelections.of(!0),ko(),Ro(Uo,{fallback:!0}),zo(),Ns(),Js(),Vi(),Wi(),ji(),zi(),mn.of([...Hs,...as,...qi,...pr,...To,...ki,...il])];export{fl as b};
