import{j as V,B as G}from"./index-c4fa426a.js";import{l as ke}from"./index-231c3e11.js";import{_ as Oe}from"./lodash-3027b055.js";import{r as M,p as $,_ as Me}from"./ace-306b8502.js";import"./mode-yaml-6ab59a35.js";import"./mode-json5-bb8ad950.js";import"./theme-textmate-f2bf9281.js";var E={},Z={},B={};Object.defineProperty(B,"__esModule",{value:!0});var je=function(){function r(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,a,e){return a&&r(t.prototype,a),e&&r(t,e),t}}(),he=M,fe=ve(he),$e=$,se=ve($e);function ve(r){return r&&r.__esModule?r:{default:r}}function Pe(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function Te(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var pe=function(r){Te(t,r);function t(){return Pe(this,t),Ke(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return je(t,[{key:"render",value:function(){return fe.default.createElement("table",{className:this.props.className},fe.default.createElement("tbody",null,this.props.children))}}]),t}(he.PureComponent);pe.propTypes={className:se.default.string,data:se.default.array.isRequired};B.default=pe;var H={},x={};Object.defineProperty(x,"__esModule",{value:!0});var xe=$,b=Ne(xe);function Ne(r){return r&&r.__esModule?r:{default:r}}var qe={readOnly:b.default.bool,key:b.default.string,className:b.default.string,component:b.default.oneOfType([b.default.element,b.default.func]),forceComponent:b.default.bool,disableEvents:b.default.bool,disableUpdatedFlag:b.default.bool,colSpan:b.default.number,rowSpan:b.default.number,width:b.default.oneOfType([b.default.number,b.default.string]),overflow:b.default.oneOf(["wrap","nowrap","clip"]),dataEditor:b.default.func,valueViewer:b.default.func};x.default=qe;Object.defineProperty(H,"__esModule",{value:!0});var Ve=function(){function r(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,a,e){return a&&r(t.prototype,a),e&&r(t,e),t}}(),ye=M,Le=ee(ye),Ye=$,z=ee(Ye),Ue=x,Ae=ee(Ue);function ee(r){return r&&r.__esModule?r:{default:r}}function Fe(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function We(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function Ie(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var _e=function(r){Ie(t,r);function t(){return Fe(this,t),We(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ve(t,[{key:"render",value:function(){return Le.default.createElement("tr",null,this.props.children)}}]),t}(ye.PureComponent);_e.propTypes={row:z.default.number.isRequired,cells:z.default.arrayOf(z.default.shape(Ae.default)).isRequired};H.default=_e;var Y={};Object.defineProperty(Y,"__esModule",{value:!0});var Be=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e])}return r},He=function(){function r(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,a,e){return a&&r(t.prototype,a),e&&r(t,e),t}}(),me=M,Ge=te(me),ze=$,S=te(ze),Je=x,Xe=te(Je);function te(r){return r&&r.__esModule?r:{default:r}}function Qe(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Ze(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function et(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var ne=function(r){et(t,r);function t(){return Qe(this,t),Ze(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return He(t,[{key:"render",value:function(){var e=this.props,n=e.cell,o=e.row,i=e.col,l=e.attributesRenderer,u=e.className,d=e.style,c=e.onMouseDown,s=e.onMouseOver,f=e.onDoubleClick,p=e.onContextMenu,v=n.colSpan,y=n.rowSpan,w=l?l(n,o,i):{};return Ge.default.createElement("td",Be({className:u,onMouseDown:c,onMouseOver:s,onDoubleClick:f,onTouchEnd:f,onContextMenu:p,colSpan:v,rowSpan:y,style:d},w),this.props.children)}}]),t}(me.PureComponent);Y.default=ne;ne.propTypes={row:S.default.number.isRequired,col:S.default.number.isRequired,cell:S.default.shape(Xe.default).isRequired,selected:S.default.bool,editing:S.default.bool,updated:S.default.bool,attributesRenderer:S.default.func,onMouseDown:S.default.func.isRequired,onMouseOver:S.default.func.isRequired,onDoubleClick:S.default.func.isRequired,onContextMenu:S.default.func.isRequired,className:S.default.string,style:S.default.object};ne.defaultProps={selected:!1,editing:!1,updated:!1,attributesRenderer:function(){}};var re={},k={};Object.defineProperty(k,"__esModule",{value:!0});k.TAB_KEY=9;k.ENTER_KEY=13;k.ESCAPE_KEY=27;k.LEFT_KEY=37;k.UP_KEY=38;k.RIGHT_KEY=39;k.DOWN_KEY=40;k.DELETE_KEY=46;k.BACKSPACE_KEY=8;var U={};Object.defineProperty(U,"__esModule",{value:!0});var tt=function(){function r(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,a,e){return a&&r(t.prototype,a),e&&r(t,e),t}}(),ge=M,nt=ae(ge),rt=$,j=ae(rt),at=x,it=ae(at);function ae(r){return r&&r.__esModule?r:{default:r}}function ot(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function lt(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function ut(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var be=function(r){ut(t,r);function t(a){ot(this,t);var e=lt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a));return e.handleChange=e.handleChange.bind(e),e}return tt(t,[{key:"componentDidMount",value:function(){this._input.focus()}},{key:"handleChange",value:function(e){this.props.onChange(e.target.value)}},{key:"render",value:function(){var e=this,n=this.props,o=n.value,i=n.onKeyDown;return nt.default.createElement("input",{ref:function(u){e._input=u},className:"data-editor",value:o,onChange:this.handleChange,onKeyDown:i})}}]),t}(ge.PureComponent);U.default=be;be.propTypes={value:j.default.node.isRequired,row:j.default.number.isRequired,col:j.default.number.isRequired,cell:j.default.shape(it.default),onChange:j.default.func.isRequired,onCommit:j.default.func.isRequired,onRevert:j.default.func.isRequired,onKeyDown:j.default.func.isRequired};var A={};Object.defineProperty(A,"__esModule",{value:!0});var dt=function(){function r(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,a,e){return a&&r(t.prototype,a),e&&r(t,e),t}}(),we=M,ft=ie(we),st=$,W=ie(st),ct=x,ht=ie(ct);function ie(r){return r&&r.__esModule?r:{default:r}}function vt(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function pt(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function yt(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var Ee=function(r){yt(t,r);function t(){return vt(this,t),pt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return dt(t,[{key:"render",value:function(){var e=this.props.value;return ft.default.createElement("span",{className:"value-viewer"},e)}}]),t}(we.PureComponent);A.default=Ee;Ee.propTypes={row:W.default.number.isRequired,col:W.default.number.isRequired,cell:W.default.shape(ht.default),value:W.default.node.isRequired};var F={};Object.defineProperty(F,"__esModule",{value:!0});F.renderValue=Ce;F.renderData=_t;function Ce(r,t,a,e){var n=e(r,t,a);return n===null||typeof n>"u"?"":n}function _t(r,t,a,e,n){var o=n?n(r,t,a):null;return o===null||typeof o>"u"?Ce(r,t,a,e):o}Object.defineProperty(re,"__esModule",{value:!0});var mt=function(){function r(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,a,e){return a&&r(t.prototype,a),e&&r(t,e),t}}(),Re=M,J=N(Re),gt=$,_=N(gt),T=k,bt=Y,wt=N(bt),Et=x,Ct=N(Et),Rt=U,St=N(Rt),Dt=A,kt=N(Dt),oe=F;function N(r){return r&&r.__esModule?r:{default:r}}function Ot(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Mt(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function jt(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}function X(r){var t=r.cell,a=r.row,e=r.col,n=r.valueRenderer,o=r.dataRenderer;return(0,oe.renderData)(t,a,e,n,o)}function ce(r){var t=r.cell,a=r.row,e=r.col,n=r.valueRenderer;return(0,oe.renderValue)(t,a,e,n)}function $t(r){var t=typeof r.width=="number"?r.width+"px":r.width;return t?{width:t}:null}var le=function(r){jt(t,r);function t(a){Ot(this,t);var e=Mt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a));return e.handleChange=e.handleChange.bind(e),e.handleCommit=e.handleCommit.bind(e),e.handleRevert=e.handleRevert.bind(e),e.handleKey=e.handleKey.bind(e),e.handleMouseDown=e.handleMouseDown.bind(e),e.handleMouseOver=e.handleMouseOver.bind(e),e.handleContextMenu=e.handleContextMenu.bind(e),e.handleDoubleClick=e.handleDoubleClick.bind(e),e.state={updated:!1,reverting:!1,committing:!1,value:""},e}return mt(t,[{key:"componentDidUpdate",value:function(e){var n=this;if(!this.props.cell.disableUpdatedFlag&&ce(e)!==ce(this.props)&&(this.setState({updated:!0}),this.timeout=setTimeout(function(){return n.setState({updated:!1})},700)),this.props.editing===!0&&e.editing===!1){var o=this.props.clearing?"":X(this.props);this.setState({value:o,reverting:!1})}e.editing===!0&&this.props.editing===!1&&!this.state.reverting&&!this.state.committing&&this.state.value!==X(this.props)&&this.props.onChange(this.props.row,this.props.col,this.state.value)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"handleChange",value:function(e){this.setState({value:e,committing:!1})}},{key:"handleCommit",value:function(e,n){var o=this.props,i=o.onChange,l=o.onNavigate;e!==X(this.props)?(this.setState({value:e,committing:!0}),i(this.props.row,this.props.col,e)):this.handleRevert(),n&&(n.preventDefault(),l(n,!0))}},{key:"handleRevert",value:function(){this.setState({reverting:!0}),this.props.onRevert()}},{key:"handleMouseDown",value:function(e){var n=this.props,o=n.row,i=n.col,l=n.onMouseDown,u=n.cell;u.disableEvents||l(o,i,e)}},{key:"handleMouseOver",value:function(e){var n=this.props,o=n.row,i=n.col,l=n.onMouseOver,u=n.cell;u.disableEvents||l(o,i)}},{key:"handleDoubleClick",value:function(e){var n=this.props,o=n.row,i=n.col,l=n.onDoubleClick,u=n.cell;u.disableEvents||l(o,i)}},{key:"handleContextMenu",value:function(e){var n=this.props,o=n.row,i=n.col,l=n.onContextMenu,u=n.cell;u.disableEvents||l(e,o,i)}},{key:"handleKey",value:function(e){var n=e.which||e.keyCode;if(n===T.ESCAPE_KEY)return this.handleRevert();var o=this.props,i=o.cell.component,l=o.forceEdit,u=l||!!i,d=n===T.ENTER_KEY||n===T.TAB_KEY||!u&&[T.LEFT_KEY,T.RIGHT_KEY,T.UP_KEY,T.DOWN_KEY].includes(n);d&&this.handleCommit(this.state.value,e)}},{key:"renderComponent",value:function(e,n){var o=n.component,i=n.readOnly,l=n.forceComponent;if(e&&!i||l)return o}},{key:"renderEditor",value:function(e,n,o,i,l){if(e){var u=n.dataEditor||l||St.default;return J.default.createElement(u,{cell:n,row:o,col:i,value:this.state.value,onChange:this.handleChange,onCommit:this.handleCommit,onRevert:this.handleRevert,onKeyDown:this.handleKey})}}},{key:"renderViewer",value:function(e,n,o,i,l){var u=e.valueViewer||l||kt.default,d=(0,oe.renderValue)(e,n,o,i);return J.default.createElement(u,{cell:e,row:n,col:o,value:d})}},{key:"render",value:function(){var e=this.props,n=e.row,o=e.col,i=e.cell,l=e.cellRenderer,u=e.valueRenderer,d=e.dataEditor,c=e.valueViewer,s=e.attributesRenderer,f=e.selected,p=e.editing,v=e.onKeyUp,y=this.state.updated,w=this.renderComponent(p,i)||this.renderEditor(p,i,n,o,d)||this.renderViewer(i,n,o,u,c),O=[i.className,"cell",i.overflow,f&&"selected",p&&"editing",i.readOnly&&"read-only",y&&"updated"].filter(function(g){return g}).join(" ");return J.default.createElement(l,{row:n,col:o,cell:i,selected:f,editing:p,updated:y,attributesRenderer:s,className:O,style:$t(i),onMouseDown:this.handleMouseDown,onMouseOver:this.handleMouseOver,onDoubleClick:this.handleDoubleClick,onContextMenu:this.handleContextMenu,onKeyUp:v},w)}}]),t}(Re.PureComponent);re.default=le;le.propTypes={row:_.default.number.isRequired,col:_.default.number.isRequired,cell:_.default.shape(Ct.default).isRequired,forceEdit:_.default.bool,selected:_.default.bool,editing:_.default.bool,editValue:_.default.any,clearing:_.default.bool,cellRenderer:_.default.func,valueRenderer:_.default.func.isRequired,dataRenderer:_.default.func,valueViewer:_.default.func,dataEditor:_.default.func,attributesRenderer:_.default.func,onNavigate:_.default.func.isRequired,onMouseDown:_.default.func.isRequired,onMouseOver:_.default.func.isRequired,onDoubleClick:_.default.func.isRequired,onContextMenu:_.default.func.isRequired,onChange:_.default.func.isRequired,onRevert:_.default.func.isRequired,onEdit:_.default.func};le.defaultProps={forceEdit:!1,selected:!1,editing:!1,clearing:!1,cellRenderer:wt.default};Object.defineProperty(Z,"__esModule",{value:!0});var Q=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(r[e]=a[e])}return r},Pt=function(){function r(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,a,e){return a&&r(t.prototype,a),e&&r(t,e),t}}(),Se=M,I=P(Se),Kt=$,h=P(Kt),Tt=B,xt=P(Tt),Nt=H,qt=P(Nt),Vt=Y,Lt=P(Vt),Yt=re,Ut=P(Yt),At=U,Ft=P(At),Wt=A,It=P(Wt),C=k;function P(r){return r&&r.__esModule?r:{default:r}}function Bt(r,t){var a={};for(var e in r)t.indexOf(e)>=0||Object.prototype.hasOwnProperty.call(r,e)&&(a[e]=r[e]);return a}function Ht(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Gt(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function zt(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var D=function(t){return Object.keys(t).length===0},L=function(t,a){for(var e=[],n=a-t>0,o=t;n?o<=a:o>=a;n?o++:o--)n?e.push(o):e.unshift(o);return e},Jt=function(t){return t.split(/\r\n|\n|\r/).map(function(a){return a.split("	")})},ue=function(r){zt(t,r);function t(a){Ht(this,t);var e=Gt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a));return e.onMouseDown=e.onMouseDown.bind(e),e.onMouseUp=e.onMouseUp.bind(e),e.onMouseOver=e.onMouseOver.bind(e),e.onDoubleClick=e.onDoubleClick.bind(e),e.onContextMenu=e.onContextMenu.bind(e),e.handleNavigate=e.handleNavigate.bind(e),e.handleKey=e.handleKey.bind(e).bind(e),e.handleCut=e.handleCut.bind(e),e.handleCopy=e.handleCopy.bind(e),e.handlePaste=e.handlePaste.bind(e),e.pageClick=e.pageClick.bind(e),e.onChange=e.onChange.bind(e),e.onRevert=e.onRevert.bind(e),e.isSelected=e.isSelected.bind(e),e.isEditing=e.isEditing.bind(e),e.isClearing=e.isClearing.bind(e),e.handleComponentKey=e.handleComponentKey.bind(e),e.handleKeyboardCellMovement=e.handleKeyboardCellMovement.bind(e),e.defaultState={start:{},end:{},selecting:!1,forceEdit:!1,editing:{},clear:{}},e.state=e.defaultState,e.removeAllListeners=e.removeAllListeners.bind(e),e.handleIEClipboardEvents=e.handleIEClipboardEvents.bind(e),e}return Pt(t,[{key:"removeAllListeners",value:function(){document.removeEventListener("mousedown",this.pageClick),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("cut",this.handleCut),document.removeEventListener("copy",this.handleCopy),document.removeEventListener("paste",this.handlePaste),document.removeEventListener("keydown",this.handleIEClipboardEvents)}},{key:"componentDidMount",value:function(){this.dgDom&&this.dgDom.addEventListener("keydown",this.handleComponentKey)}},{key:"componentWillUnmount",value:function(){this.dgDom&&this.dgDom.removeEventListener("keydown",this.handleComponentKey),this.removeAllListeners()}},{key:"isSelectionControlled",value:function(){return"selected"in this.props}},{key:"getState",value:function(){var e=this.state;if(this.isSelectionControlled()){var n=this.props.selected||{},o=n.start,i=n.end;o=o||this.defaultState.start,i=i||this.defaultState.end,e=Q({},e,{start:o,end:i})}return e}},{key:"_setState",value:function(e){var n=this.props.editModeChanged;if(n&&e.editing){var o=!D(this.state.editing),i=!D(e.editing);o!=i&&n(i)}if(this.isSelectionControlled()&&("start"in e||"end"in e)){var l=e.start,u=e.end,d=Bt(e,["start","end"]),c=this.props,s=c.selected,f=c.onSelect;s=s||{},l||(l="start"in s?s.start:this.defaultState.start),u||(u="end"in s?s.end:this.defaultState.end),f&&f({start:l,end:u}),this.setState(d)}else this.setState(e)}},{key:"pageClick",value:function(e){if(!this.props.disablePageClick){var n=this.dgDom;n.contains(e.target)||(this.setState(this.defaultState),this.removeAllListeners())}}},{key:"handleCut",value:function(e){if(D(this.state.editing)){e.preventDefault(),this.handleCopy(e);var n=this.getState(),o=n.start,i=n.end;this.clearSelectedCells(o,i)}}},{key:"handleIEClipboardEvents",value:function(e){e.ctrlKey&&(e.keyCode===67?this.handleCopy(e):e.keyCode===88?this.handleCut(e):(e.keyCode===86||e.which===86)&&this.handlePaste(e))}},{key:"handleCopy",value:function(e){if(D(this.state.editing)){e.preventDefault();var n=this.props,o=n.dataRenderer,i=n.valueRenderer,l=n.data,u=this.getState(),d=u.start,c=u.end;if(this.props.handleCopy)this.props.handleCopy({event:e,dataRenderer:o,valueRenderer:i,data:l,start:d,end:c,range:L});else{var s=L(d.i,c.i).map(function(f){return L(d.j,c.j).map(function(p){var v=l[f][p],y=o?o(v,f,p):null;return y===""||y===null||typeof y>"u"?i(v,f,p):y}).join("	")}).join(`
`);window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",s):e.clipboardData.setData("text/plain",s)}}}},{key:"handlePaste",value:function(e){if(D(this.state.editing)){var n=this.getState(),o=n.start,i=n.end;o={i:Math.min(o.i,i.i),j:Math.min(o.j,i.j)},i={i:Math.max(o.i,i.i),j:Math.max(o.j,i.j)};var l=this.props.parsePaste||Jt,u=[],d=[];window.clipboardData&&window.clipboardData.getData?d=l(window.clipboardData.getData("Text")):e.clipboardData&&e.clipboardData.getData&&(d=l(e.clipboardData.getData("text/plain")));var c=this.props,s=c.data,f=c.onCellsChanged,p=c.onPaste,v=c.onChange;if(f){var y=[];d.forEach(function(w,O){w.forEach(function(g,m){i={i:o.i+O,j:o.j+m};var R=s[i.i]&&s[i.i][i.j];R?R.readOnly||u.push({cell:R,row:i.i,col:i.j,value:g}):y.push({row:i.i,col:i.j,value:g})})}),y.length?f(u,y):f(u)}else p?(d.forEach(function(w,O){var g=[];w.forEach(function(m,R){i={i:o.i+O,j:o.j+R};var K=s[i.i]&&s[i.i][i.j];g.push({cell:K,data:m})}),u.push(g)}),p(u)):v&&d.forEach(function(w,O){w.forEach(function(g,m){i={i:o.i+O,j:o.j+m};var R=s[i.i]&&s[i.i][i.j];R&&!R.readOnly&&v(R,i.i,i.j,g)})});this._setState({end:i})}}},{key:"handleKeyboardCellMovement",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=this.getState(),i=o.start,l=o.editing,u=this.props.data,d=l&&!D(l),c=u[i.i]&&u[i.i][i.j];if(d&&!n)return!1;var s=c&&c.component,f=e.which||e.keyCode;if(s&&d){e.preventDefault();return}f===C.TAB_KEY?this.handleNavigate(e,{i:0,j:e.shiftKey?-1:1},!0):f===C.RIGHT_KEY?this.handleNavigate(e,{i:0,j:1}):f===C.LEFT_KEY?this.handleNavigate(e,{i:0,j:-1}):f===C.UP_KEY?this.handleNavigate(e,{i:-1,j:0}):f===C.DOWN_KEY?this.handleNavigate(e,{i:1,j:0}):n&&f===C.ENTER_KEY&&this.handleNavigate(e,{i:e.shiftKey?-1:1,j:0})}},{key:"handleKey",value:function(e){if(!(e.isPropagationStopped&&e.isPropagationStopped())){var n=e.which||e.keyCode,o=this.getState(),i=o.start,l=o.end,u=o.editing,d=u&&!D(u),c=!i||D(i),s=e.ctrlKey||e.metaKey,f=n===C.DELETE_KEY||n===C.BACKSPACE_KEY,p=n===C.ENTER_KEY,v=n>=48&&n<=57,y=n>=65&&n<=90,w=n>=160&&n<=255,O=n>=96&&n<=105,g=!c&&this.props.data[i.i][i.j],m=[187,189,190,107,109,110].indexOf(n)>-1;if(c||s)return!0;d||(this.handleKeyboardCellMovement(e),f?(e.preventDefault(),this.clearSelectedCells(i,l)):g&&!g.readOnly&&(p?(this._setState({editing:i,clear:{},forceEdit:!0}),e.preventDefault()):(v||O||y||w||m)&&this._setState({editing:i,clear:i,forceEdit:!1})))}}},{key:"getSelectedCells",value:function(e,n,o){var i=[];return L(n.i,o.i).map(function(l){L(n.j,o.j).map(function(u){e[l]&&e[l][u]&&i.push({cell:e[l][u],row:l,col:u})})}),i}},{key:"clearSelectedCells",value:function(e,n){var o=this,i=this.props,l=i.data,u=i.onCellsChanged,d=i.onChange,c=this.getSelectedCells(l,e,n).filter(function(s){return!s.cell.readOnly}).map(function(s){return Q({},s,{value:""})});u?(u(c),this.onRevert()):d&&setTimeout(function(){c.forEach(function(s){var f=s.cell,p=s.row,v=s.col,y=s.value;d(f,p,v,y)}),o.onRevert()},0)}},{key:"updateLocationSingleCell",value:function(e){this._setState({start:e,end:e,editing:{}})}},{key:"updateLocationMultipleCells",value:function(e){var n=this.getState(),o=n.start,i=n.end,l=this.props.data,u={i:o.i,j:o.j},d={i:i.i+e.i,j:Math.min(l[0].length-1,Math.max(0,i.j+e.j))};this._setState({start:u,end:d,editing:{}})}},{key:"searchForNextSelectablePos",value:function(e,n,o,i,l){for(var u=function(v){return{i:v.i-1,j:n[0].length-1}},d=function(v){return{i:v.i+1,j:0}},c=function(v){return{i:v.i+i.i,j:v.j+i.j}},s=function(v){var y=v.i,w=v.j;return n[y]&&typeof n[y][w]<"u"},f=c(o);s(f)&&!e(n[f.i][f.j],f.i,f.j);)f=c(f);if(!s(f)){if(!l)return null;i.j<0?f=u(f):f=d(f)}return s(f)&&!e(n[f.i][f.j],f.i,f.j)?this.searchForNextSelectablePos(e,n,f,i,l):s(f)?f:null}},{key:"handleNavigate",value:function(e,n,o){if(n&&(n.i||n.j)){var i=this.props.data,l=this.getState(),u=l.start,d=e.shiftKey&&!o,c=this.props.isCellNavigable?this.props.isCellNavigable:function(){return!0};if(d)this.updateLocationMultipleCells(n);else{var s=this.searchForNextSelectablePos(c,i,u,n,o);s&&this.updateLocationSingleCell(s)}e.preventDefault()}}},{key:"handleComponentKey",value:function(e){var n=this,o=e.which||e.keyCode;if([C.ENTER_KEY,C.ESCAPE_KEY,C.TAB_KEY].includes(o)){var i=this.state.editing,l=this.props.data,u=!D(i);if(u){var d=l[i.i][i.j],c=e.shiftKey?-1:1;if(d&&d.component&&!d.forceComponent){e.preventDefault();var s=this.onRevert;o===C.ENTER_KEY?s=function(){return n.handleNavigate(e,{i:c,j:0})}:o===C.TAB_KEY&&(s=function(){return n.handleNavigate(e,{i:0,j:c},!0)}),setTimeout(function(){s(),n.dgDom&&n.dgDom.focus({preventScroll:!0})},1)}}}}},{key:"onContextMenu",value:function(e,n,o){var i=this.props.data[n][o];this.props.onContextMenu&&this.props.onContextMenu(e,i,n,o)}},{key:"onDoubleClick",value:function(e,n){var o=this.props.data[e][n];o.readOnly||this._setState({editing:{i:e,j:n},forceEdit:!0,clear:{}})}},{key:"onMouseDown",value:function(e,n,o){var i=!D(this.state.editing)&&this.state.editing.i===e&&this.state.editing.j===n,l=D(this.state.editing)||this.state.editing.i!==e||this.state.editing.j!==n?{}:this.state.editing;this._setState({selecting:!i,start:o.shiftKey?this.getState().start:{i:e,j:n},end:{i:e,j:n},editing:l,forceEdit:!!i});var u=window.navigator.userAgent,d=/MSIE|Trident/.test(u);d&&document.addEventListener("keydown",this.handleIEClipboardEvents),document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousedown",this.pageClick),document.addEventListener("cut",this.handleCut),document.addEventListener("copy",this.handleCopy),document.addEventListener("paste",this.handlePaste)}},{key:"onMouseOver",value:function(e,n){this.state.selecting&&D(this.state.editing)&&this._setState({end:{i:e,j:n}})}},{key:"onMouseUp",value:function(){this._setState({selecting:!1}),document.removeEventListener("mouseup",this.onMouseUp)}},{key:"onChange",value:function(e,n,o){var i=this.props,l=i.onChange,u=i.onCellsChanged,d=i.data;u?u([{cell:d[e][n],row:e,col:n,value:o}]):l&&l(d[e][n],e,n,o),this.onRevert()}},{key:"onRevert",value:function(){var e=this;this._setState({editing:{}}),setTimeout(function(){e.dgDom&&e.dgDom.focus({preventScroll:!0})},1)}},{key:"componentDidUpdate",value:function(e,n){var o=this.state,i=o.start,l=o.end,u=n.end;!D(l)&&!(l.i===u.i&&l.j===u.j)&&!this.isSelectionControlled()&&this.props.onSelect&&this.props.onSelect({start:i,end:l})}},{key:"isSelectedRow",value:function(e){var n=this.getState(),o=n.start,i=n.end,l=o.i,u=i.i;return l<=u?e>=l&&e<=u:e<=l&&e>=u}},{key:"isSelected",value:function(e,n){var o=this.getState(),i=o.start,l=o.end,u=n>=i.j&&n<=l.j,d=n<=i.j&&n>=l.j,c=e>=i.i&&e<=l.i,s=e<=i.i&&e>=l.i;return u&&c||d&&c||d&&s||u&&s}},{key:"isEditing",value:function(e,n){return this.state.editing.i===e&&this.state.editing.j===n}},{key:"isClearing",value:function(e,n){return this.state.clear.i===e&&this.state.clear.j===n}},{key:"render",value:function(){var e=this,n=this.props,o=n.sheetRenderer,i=n.rowRenderer,l=n.cellRenderer,u=n.dataRenderer,d=n.valueRenderer,c=n.dataEditor,s=n.valueViewer,f=n.attributesRenderer,p=n.className,v=n.overflow,y=n.data,w=n.keyFn,O=this.state.forceEdit;return I.default.createElement("span",{ref:function(m){e.dgDom=m},tabIndex:"0",className:"data-grid-container",onKeyDown:this.handleKey},I.default.createElement(o,{data:y,className:["data-grid",p,v].filter(function(g){return g}).join(" ")},y.map(function(g,m){return I.default.createElement(i,{key:w?w(m):m,row:m,cells:g,selected:e.isSelectedRow(m)},g.map(function(R,K){var de=e.isEditing(m,K);return I.default.createElement(Ut.default,Q({key:R.key?R.key:m+"-"+K,row:m,col:K,cell:R,forceEdit:!1,onMouseDown:e.onMouseDown,onMouseOver:e.onMouseOver,onDoubleClick:e.onDoubleClick,onContextMenu:e.onContextMenu,onChange:e.onChange,onRevert:e.onRevert,onNavigate:e.handleKeyboardCellMovement,onKey:e.handleKey,selected:e.isSelected(m,K),editing:de,clearing:e.isClearing(m,K),attributesRenderer:f,cellRenderer:l,valueRenderer:d,dataRenderer:u,valueViewer:s,dataEditor:c},de?{forceEdit:O}:{}))}))})))}}]),t}(Se.PureComponent);Z.default=ue;ue.propTypes={data:h.default.array.isRequired,className:h.default.string,disablePageClick:h.default.bool,overflow:h.default.oneOf(["wrap","nowrap","clip"]),onChange:h.default.func,onCellsChanged:h.default.func,onContextMenu:h.default.func,onSelect:h.default.func,isCellNavigable:h.default.func,selected:h.default.shape({start:h.default.shape({i:h.default.number,j:h.default.number}),end:h.default.shape({i:h.default.number,j:h.default.number})}),valueRenderer:h.default.func.isRequired,dataRenderer:h.default.func,sheetRenderer:h.default.func.isRequired,rowRenderer:h.default.func.isRequired,cellRenderer:h.default.func.isRequired,valueViewer:h.default.func,dataEditor:h.default.func,parsePaste:h.default.func,attributesRenderer:h.default.func,keyFn:h.default.func,handleCopy:h.default.func,editModeChanged:h.default.func};ue.defaultProps={sheetRenderer:xt.default,rowRenderer:qt.default,cellRenderer:Lt.default,valueViewer:It.default,dataEditor:Ft.default};Object.defineProperty(E,"__esModule",{value:!0});E.renderData=E.renderValue=E.ValueViewer=E.DataEditor=E.Cell=E.Row=E.Sheet=void 0;var Xt=Z,Qt=q(Xt),Zt=B,en=q(Zt),tn=H,nn=q(tn),rn=Y,an=q(rn),on=U,ln=q(on),un=A,dn=q(un),De=F;function q(r){return r&&r.__esModule?r:{default:r}}var fn=E.default=Qt.default;E.Sheet=en.default;E.Row=nn.default;E.Cell=an.default;E.DataEditor=ln.default;E.ValueViewer=dn.default;E.renderValue=De.renderValue;E.renderData=De.renderData;const mn=()=>{const[r,t]=M.useState("{}"),[a,e]=M.useState([]),[n]=M.useState({useWorker:!1,showLineNumbers:!0,tabSize:2,wrap:!0,fontSize:14});return M.useEffect(()=>{try{const o=ke.parse(r);if(console.log(o),Array.isArray(o)){let i=[];o.forEach(u=>{Object.keys(u).forEach(c=>{i.push({value:c,readOnly:!0})})}),i=Oe.uniqWith(i,(u,d)=>u.value===d.value);const l=[];o.forEach(u=>{const d=i.map(c=>({value:u[c.value]||null,readOnly:!0}));l.push(d)}),e([i,...l])}}catch(o){o instanceof SyntaxError&&console.error(o.message)}},[r]),V.jsxs(G,{children:[V.jsx(G,{sx:{width:"100%",height:"300px"},children:V.jsx(Me,{theme:"textmate",placeholder:"JSON",setOptions:n,value:r,onChange:t,mode:"json5",width:"100%",height:"100%"})}),V.jsx(G,{sx:{mt:3,width:"100%"},children:V.jsx(fn,{data:a,valueRenderer:o=>o.value})})]})};export{mn as default};
//# sourceMappingURL=page-ec1baaa6.js.map
