import{af as e}from"./pro-components-CPZIsSOc.js";import{F as j,L as b,d as C}from"./index-BXGgSu6C.js";import{c as v}from"./index-DkoMvkBT.js";import{c as L,p as N,a as E}from"./middleware-idi24fxu.js";import{a as r,aT as c}from"./antd-Cl3cKmq-.js";import"./json-editor-D3HpTOiY.js";const O=L()(N(n=>({value:"// some code here",options:{tabSize:2},language:"json",setValue:a=>n(()=>({value:a})),setOptions:a=>n(()=>({options:a})),setLanguage:a=>n(()=>({language:a}))}),{name:"json-formatter",storage:E(()=>localStorage)})),F=()=>{const[n,a]=r.useState({lineNumber:0,column:0}),i=r.useRef(void 0),m=r.useRef(void 0),{value:d,setValue:p,options:o,language:l,setLanguage:g}=O();r.useEffect(()=>{var t;(t=i.current)==null||t.updateOptions(o)},[o]);const h=(t,s)=>{i.current=t,m.current=s,t.onDidChangeCursorPosition(u=>{a(S=>({...S,lineNumber:u.position.lineNumber,column:u.position.column}))}),s.languages.json.jsonDefaults.setDiagnosticsOptions({allowComments:!0}),s.languages.html.registerHTMLLanguageService("xml",{},{documentFormattingEdits:!0})},x=(t,s)=>{p(t||"")},f=t=>{console.log(t)};return e.jsxs(j,{children:[e.jsx("div",{className:"h-[48px] p-2",children:e.jsx(b,{value:l,onChange:g})}),e.jsx(C,{height:"calc(100% - 70px)",language:l,options:{automaticLayout:!0,tabSize:o.tabSize,formatOnType:!0,stickyTabStops:!0,stickyScroll:{enabled:!0,maxLineCount:10,defaultModel:"foldingProviderModel"}},theme:"light",defaultValue:d,onMount:h,onChange:x,onValidate:f}),e.jsxs("div",{className:v("h-[22px] px-4 text-sm tabular-nums"),children:[e.jsx("span",{children:`Ln ${n.lineNumber}, Col ${n.column}`}),e.jsx(c,{type:"vertical"}),e.jsx("span",{children:`Space ${o.tabSize}`}),e.jsx(c,{type:"vertical"}),e.jsx("span",{children:"JSON with Comments"})]})]})};export{F as Component};
