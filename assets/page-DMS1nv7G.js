import{af as ee}from"./pro-components-L2sDkqQs.js";import{a_ as Te}from"./md-editor-C6otpRZL.js";import{r as Z,D as qe,a as re}from"./antd-Bzy0GL_f.js";import{A as xe}from"./index-Cbqzjypa.js";import{a as z}from"./ace-BbTluGSE.js";import"./ext-searchbox-CeJ3tSIk.js";import{aZ as Ne}from"./json-editor-CBqK5HSN.js";var A={},ae={},ie={},me;function Me(){if(me)return ie;me=1,Object.defineProperty(ie,"__esModule",{value:!0});var j=function(){function S(w,o){for(var t=0;t<o.length;t++){var l=o[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(w,l.key,l)}}return function(w,o,t){return o&&S(w.prototype,o),t&&S(w,t),w}}(),E=Z(),k=i(E),O=z(),s=i(O);function i(S){return S&&S.__esModule?S:{default:S}}function P(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")}function K(S,w){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:S}function T(S,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);S.prototype=Object.create(w&&w.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(S,w):S.__proto__=w)}var q=function(S){T(w,S);function w(){return P(this,w),K(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return j(w,[{key:"render",value:function(){return k.default.createElement("table",{className:this.props.className},k.default.createElement("tbody",null,this.props.children))}}]),w}(E.PureComponent);return q.propTypes={className:s.default.string,data:s.default.array.isRequired},ie.default=q,ie}var oe={},le={},_e;function ne(){if(_e)return le;_e=1,Object.defineProperty(le,"__esModule",{value:!0});var j=z(),E=k(j);function k(s){return s&&s.__esModule?s:{default:s}}var O={readOnly:E.default.bool,key:E.default.string,className:E.default.string,component:E.default.oneOfType([E.default.element,E.default.func]),forceComponent:E.default.bool,disableEvents:E.default.bool,disableUpdatedFlag:E.default.bool,colSpan:E.default.number,rowSpan:E.default.number,width:E.default.oneOfType([E.default.number,E.default.string]),overflow:E.default.oneOf(["wrap","nowrap","clip"]),dataEditor:E.default.func,valueViewer:E.default.func};return le.default=O,le}var ge;function je(){if(ge)return oe;ge=1,Object.defineProperty(oe,"__esModule",{value:!0});var j=function(){function o(t,l){for(var m=0;m<l.length;m++){var y=l[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(t,y.key,y)}}return function(t,l,m){return l&&o(t.prototype,l),m&&o(t,m),t}}(),E=Z(),k=K(E),O=z(),s=K(O),i=ne(),P=K(i);function K(o){return o&&o.__esModule?o:{default:o}}function T(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function q(o,t){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:o}function S(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(o,t):o.__proto__=t)}var w=function(o){S(t,o);function t(){return T(this,t),q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j(t,[{key:"render",value:function(){return k.default.createElement("tr",null,this.props.children)}}]),t}(E.PureComponent);return w.propTypes={row:s.default.number.isRequired,cells:s.default.arrayOf(s.default.shape(P.default)).isRequired},oe.default=w,oe}var ue={},be;function he(){if(be)return ue;be=1,Object.defineProperty(ue,"__esModule",{value:!0});var j=Object.assign||function(t){for(var l=1;l<arguments.length;l++){var m=arguments[l];for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(t[y]=m[y])}return t},E=function(){function t(l,m){for(var y=0;y<m.length;y++){var U=m[y];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(l,U.key,U)}}return function(l,m,y){return m&&t(l.prototype,m),y&&t(l,y),l}}(),k=Z(),O=T(k),s=z(),i=T(s),P=ne(),K=T(P);function T(t){return t&&t.__esModule?t:{default:t}}function q(t,l){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}function S(t,l){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:t}function w(t,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);t.prototype=Object.create(l&&l.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(t,l):t.__proto__=l)}var o=function(t){w(l,t);function l(){return q(this,l),S(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return E(l,[{key:"render",value:function(){var y=this.props,U=y.cell,N=y.row,W=y.col,B=y.attributesRenderer,Q=y.className,J=y.style,R=y.onMouseDown,_=y.onMouseOver,M=y.onDoubleClick,a=y.onContextMenu,c=U.colSpan,h=U.rowSpan,f=B?B(U,N,W):{};return O.default.createElement("td",j({className:Q,onMouseDown:R,onMouseOver:_,onDoubleClick:M,onTouchEnd:M,onContextMenu:a,colSpan:c,rowSpan:h,style:J},f),this.props.children)}}]),l}(k.PureComponent);return ue.default=o,o.propTypes={row:i.default.number.isRequired,col:i.default.number.isRequired,cell:i.default.shape(K.default).isRequired,selected:i.default.bool,editing:i.default.bool,updated:i.default.bool,attributesRenderer:i.default.func,onMouseDown:i.default.func.isRequired,onMouseOver:i.default.func.isRequired,onDoubleClick:i.default.func.isRequired,onContextMenu:i.default.func.isRequired,className:i.default.string,style:i.default.object},o.defaultProps={selected:!1,editing:!1,updated:!1,attributesRenderer:function(){}},ue}var de={},H={},we;function Pe(){return we||(we=1,Object.defineProperty(H,"__esModule",{value:!0}),H.TAB_KEY=9,H.ENTER_KEY=13,H.ESCAPE_KEY=27,H.LEFT_KEY=37,H.UP_KEY=38,H.RIGHT_KEY=39,H.DOWN_KEY=40,H.DELETE_KEY=46,H.BACKSPACE_KEY=8),H}var fe={},Ee;function ve(){if(Ee)return fe;Ee=1,Object.defineProperty(fe,"__esModule",{value:!0});var j=function(){function o(t,l){for(var m=0;m<l.length;m++){var y=l[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(t,y.key,y)}}return function(t,l,m){return l&&o(t.prototype,l),m&&o(t,m),t}}(),E=Z(),k=K(E),O=z(),s=K(O),i=ne(),P=K(i);function K(o){return o&&o.__esModule?o:{default:o}}function T(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function q(o,t){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:o}function S(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(o,t):o.__proto__=t)}var w=function(o){S(t,o);function t(l){T(this,t);var m=q(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,l));return m.handleChange=m.handleChange.bind(m),m}return j(t,[{key:"componentDidMount",value:function(){this._input.focus()}},{key:"handleChange",value:function(m){this.props.onChange(m.target.value)}},{key:"render",value:function(){var m=this,y=this.props,U=y.value,N=y.onKeyDown;return k.default.createElement("input",{ref:function(B){m._input=B},className:"data-editor",value:U,onChange:this.handleChange,onKeyDown:N})}}]),t}(E.PureComponent);return fe.default=w,w.propTypes={value:s.default.node.isRequired,row:s.default.number.isRequired,col:s.default.number.isRequired,cell:s.default.shape(P.default),onChange:s.default.func.isRequired,onCommit:s.default.func.isRequired,onRevert:s.default.func.isRequired,onKeyDown:s.default.func.isRequired},fe}var se={},Ce;function pe(){if(Ce)return se;Ce=1,Object.defineProperty(se,"__esModule",{value:!0});var j=function(){function o(t,l){for(var m=0;m<l.length;m++){var y=l[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(t,y.key,y)}}return function(t,l,m){return l&&o(t.prototype,l),m&&o(t,m),t}}(),E=Z(),k=K(E),O=z(),s=K(O),i=ne(),P=K(i);function K(o){return o&&o.__esModule?o:{default:o}}function T(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function q(o,t){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:o}function S(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);o.prototype=Object.create(t&&t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(o,t):o.__proto__=t)}var w=function(o){S(t,o);function t(){return T(this,t),q(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return j(t,[{key:"render",value:function(){var m=this.props.value;return k.default.createElement("span",{className:"value-viewer"},m)}}]),t}(E.PureComponent);return se.default=w,w.propTypes={row:s.default.number.isRequired,col:s.default.number.isRequired,cell:s.default.shape(P.default),value:s.default.node.isRequired},se}var te={},Re;function Ke(){if(Re)return te;Re=1,Object.defineProperty(te,"__esModule",{value:!0}),te.renderValue=j,te.renderData=E;function j(k,O,s,i){var P=i(k,O,s);return P===null||typeof P>"u"?"":P}function E(k,O,s,i,P){var K=P?P(k,O,s):null;return K===null||typeof K>"u"?j(k,O,s,i):K}return te}var Se;function Ve(){if(Se)return de;Se=1,Object.defineProperty(de,"__esModule",{value:!0});var j=function(){function R(_,M){for(var a=0;a<M.length;a++){var c=M[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(_,c.key,c)}}return function(_,M,a){return M&&R(_.prototype,M),a&&R(_,a),_}}(),E=Z(),k=m(E),O=z(),s=m(O),i=Pe(),P=he(),K=m(P),T=ne(),q=m(T),S=ve(),w=m(S),o=pe(),t=m(o),l=Ke();function m(R){return R&&R.__esModule?R:{default:R}}function y(R,_){if(!(R instanceof _))throw new TypeError("Cannot call a class as a function")}function U(R,_){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:R}function N(R,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);R.prototype=Object.create(_&&_.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(R,_):R.__proto__=_)}function W(R){var _=R.cell,M=R.row,a=R.col,c=R.valueRenderer,h=R.dataRenderer;return(0,l.renderData)(_,M,a,c,h)}function B(R){var _=R.cell,M=R.row,a=R.col,c=R.valueRenderer;return(0,l.renderValue)(_,M,a,c)}function Q(R){var _=typeof R.width=="number"?R.width+"px":R.width;return _?{width:_}:null}var J=function(R){N(_,R);function _(M){y(this,_);var a=U(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,M));return a.handleChange=a.handleChange.bind(a),a.handleCommit=a.handleCommit.bind(a),a.handleRevert=a.handleRevert.bind(a),a.handleKey=a.handleKey.bind(a),a.handleMouseDown=a.handleMouseDown.bind(a),a.handleMouseOver=a.handleMouseOver.bind(a),a.handleContextMenu=a.handleContextMenu.bind(a),a.handleDoubleClick=a.handleDoubleClick.bind(a),a.state={updated:!1,reverting:!1,committing:!1,value:""},a}return j(_,[{key:"componentDidUpdate",value:function(a){var c=this;if(!this.props.cell.disableUpdatedFlag&&B(a)!==B(this.props)&&(this.setState({updated:!0}),this.timeout=setTimeout(function(){return c.setState({updated:!1})},700)),this.props.editing===!0&&a.editing===!1){var h=this.props.clearing?"":W(this.props);this.setState({value:h,reverting:!1})}a.editing===!0&&this.props.editing===!1&&!this.state.reverting&&!this.state.committing&&this.state.value!==W(this.props)&&this.props.onChange(this.props.row,this.props.col,this.state.value)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"handleChange",value:function(a){this.setState({value:a,committing:!1})}},{key:"handleCommit",value:function(a,c){var h=this.props,f=h.onChange,d=h.onNavigate;a!==W(this.props)?(this.setState({value:a,committing:!0}),f(this.props.row,this.props.col,a)):this.handleRevert(),c&&(c.preventDefault(),d(c,!0))}},{key:"handleRevert",value:function(){this.setState({reverting:!0}),this.props.onRevert()}},{key:"handleMouseDown",value:function(a){var c=this.props,h=c.row,f=c.col,d=c.onMouseDown,e=c.cell;e.disableEvents||d(h,f,a)}},{key:"handleMouseOver",value:function(a){var c=this.props,h=c.row,f=c.col,d=c.onMouseOver,e=c.cell;e.disableEvents||d(h,f)}},{key:"handleDoubleClick",value:function(a){var c=this.props,h=c.row,f=c.col,d=c.onDoubleClick,e=c.cell;e.disableEvents||d(h,f)}},{key:"handleContextMenu",value:function(a){var c=this.props,h=c.row,f=c.col,d=c.onContextMenu,e=c.cell;e.disableEvents||d(a,h,f)}},{key:"handleKey",value:function(a){var c=a.which||a.keyCode;if(c===i.ESCAPE_KEY)return this.handleRevert();var h=this.props,f=h.cell.component,d=h.forceEdit,e=d||!!f,n=c===i.ENTER_KEY||c===i.TAB_KEY||!e&&[i.LEFT_KEY,i.RIGHT_KEY,i.UP_KEY,i.DOWN_KEY].includes(c);n&&this.handleCommit(this.state.value,a)}},{key:"renderComponent",value:function(a,c){var h=c.component,f=c.readOnly,d=c.forceComponent;if(a&&!f||d)return h}},{key:"renderEditor",value:function(a,c,h,f,d){if(a){var e=c.dataEditor||d||w.default;return k.default.createElement(e,{cell:c,row:h,col:f,value:this.state.value,onChange:this.handleChange,onCommit:this.handleCommit,onRevert:this.handleRevert,onKeyDown:this.handleKey})}}},{key:"renderViewer",value:function(a,c,h,f,d){var e=a.valueViewer||d||t.default,n=(0,l.renderValue)(a,c,h,f);return k.default.createElement(e,{cell:a,row:c,col:h,value:n})}},{key:"render",value:function(){var a=this.props,c=a.row,h=a.col,f=a.cell,d=a.cellRenderer,e=a.valueRenderer,n=a.dataEditor,u=a.valueViewer,r=a.attributesRenderer,p=a.selected,v=a.editing,C=a.onKeyUp,D=this.state.updated,g=this.renderComponent(v,f)||this.renderEditor(v,f,c,h,n)||this.renderViewer(f,c,h,e,u),b=[f.className,"cell",f.overflow,p&&"selected",v&&"editing",f.readOnly&&"read-only",D&&"updated"].filter(function(L){return L}).join(" ");return k.default.createElement(d,{row:c,col:h,cell:f,selected:p,editing:v,updated:D,attributesRenderer:r,className:b,style:Q(f),onMouseDown:this.handleMouseDown,onMouseOver:this.handleMouseOver,onDoubleClick:this.handleDoubleClick,onContextMenu:this.handleContextMenu,onKeyUp:C},g)}}]),_}(E.PureComponent);return de.default=J,J.propTypes={row:s.default.number.isRequired,col:s.default.number.isRequired,cell:s.default.shape(q.default).isRequired,forceEdit:s.default.bool,selected:s.default.bool,editing:s.default.bool,editValue:s.default.any,clearing:s.default.bool,cellRenderer:s.default.func,valueRenderer:s.default.func.isRequired,dataRenderer:s.default.func,valueViewer:s.default.func,dataEditor:s.default.func,attributesRenderer:s.default.func,onNavigate:s.default.func.isRequired,onMouseDown:s.default.func.isRequired,onMouseOver:s.default.func.isRequired,onDoubleClick:s.default.func.isRequired,onContextMenu:s.default.func.isRequired,onChange:s.default.func.isRequired,onRevert:s.default.func.isRequired,onEdit:s.default.func},J.defaultProps={forceEdit:!1,selected:!1,editing:!1,clearing:!1,cellRenderer:K.default},de}var De;function Le(){if(De)return ae;De=1,Object.defineProperty(ae,"__esModule",{value:!0});var j=Object.assign||function(h){for(var f=1;f<arguments.length;f++){var d=arguments[f];for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(h[e]=d[e])}return h},E=function(){function h(f,d){for(var e=0;e<d.length;e++){var n=d[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(f,n.key,n)}}return function(f,d,e){return d&&h(f.prototype,d),e&&h(f,e),f}}(),k=Z(),O=W(k),s=z(),i=W(s),P=Me(),K=W(P),T=je(),q=W(T),S=he(),w=W(S),o=Ve(),t=W(o),l=ve(),m=W(l),y=pe(),U=W(y),N=Pe();function W(h){return h&&h.__esModule?h:{default:h}}function B(h,f){var d={};for(var e in h)f.indexOf(e)>=0||Object.prototype.hasOwnProperty.call(h,e)&&(d[e]=h[e]);return d}function Q(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function J(h,f){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:h}function R(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(h,f):h.__proto__=f)}var _=function(f){return Object.keys(f).length===0},M=function(f,d){for(var e=[],n=d-f>0,u=f;n?u<=d:u>=d;n?u++:u--)n?e.push(u):e.unshift(u);return e},a=function(f){return f.split(/\r\n|\n|\r/).map(function(d){return d.split("	")})},c=function(h){R(f,h);function f(d){Q(this,f);var e=J(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,d));return e.onMouseDown=e.onMouseDown.bind(e),e.onMouseUp=e.onMouseUp.bind(e),e.onMouseOver=e.onMouseOver.bind(e),e.onDoubleClick=e.onDoubleClick.bind(e),e.onContextMenu=e.onContextMenu.bind(e),e.handleNavigate=e.handleNavigate.bind(e),e.handleKey=e.handleKey.bind(e).bind(e),e.handleCut=e.handleCut.bind(e),e.handleCopy=e.handleCopy.bind(e),e.handlePaste=e.handlePaste.bind(e),e.pageClick=e.pageClick.bind(e),e.onChange=e.onChange.bind(e),e.onRevert=e.onRevert.bind(e),e.isSelected=e.isSelected.bind(e),e.isEditing=e.isEditing.bind(e),e.isClearing=e.isClearing.bind(e),e.handleComponentKey=e.handleComponentKey.bind(e),e.handleKeyboardCellMovement=e.handleKeyboardCellMovement.bind(e),e.defaultState={start:{},end:{},selecting:!1,forceEdit:!1,editing:{},clear:{}},e.state=e.defaultState,e.removeAllListeners=e.removeAllListeners.bind(e),e.handleIEClipboardEvents=e.handleIEClipboardEvents.bind(e),e}return E(f,[{key:"removeAllListeners",value:function(){document.removeEventListener("mousedown",this.pageClick),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("cut",this.handleCut),document.removeEventListener("copy",this.handleCopy),document.removeEventListener("paste",this.handlePaste),document.removeEventListener("keydown",this.handleIEClipboardEvents)}},{key:"componentDidMount",value:function(){this.dgDom&&this.dgDom.addEventListener("keydown",this.handleComponentKey)}},{key:"componentWillUnmount",value:function(){this.dgDom&&this.dgDom.removeEventListener("keydown",this.handleComponentKey),this.removeAllListeners()}},{key:"isSelectionControlled",value:function(){return"selected"in this.props}},{key:"getState",value:function(){var e=this.state;if(this.isSelectionControlled()){var n=this.props.selected||{},u=n.start,r=n.end;u=u||this.defaultState.start,r=r||this.defaultState.end,e=j({},e,{start:u,end:r})}return e}},{key:"_setState",value:function(e){var n=this.props.editModeChanged;if(n&&e.editing){var u=!_(this.state.editing),r=!_(e.editing);u!=r&&n(r)}if(this.isSelectionControlled()&&("start"in e||"end"in e)){var p=e.start,v=e.end,C=B(e,["start","end"]),D=this.props,g=D.selected,b=D.onSelect;g=g||{},p||(p="start"in g?g.start:this.defaultState.start),v||(v="end"in g?g.end:this.defaultState.end),b&&b({start:p,end:v}),this.setState(C)}else this.setState(e)}},{key:"pageClick",value:function(e){if(!this.props.disablePageClick){var n=this.dgDom;n.contains(e.target)||(this.setState(this.defaultState),this.removeAllListeners())}}},{key:"handleCut",value:function(e){if(_(this.state.editing)){e.preventDefault(),this.handleCopy(e);var n=this.getState(),u=n.start,r=n.end;this.clearSelectedCells(u,r)}}},{key:"handleIEClipboardEvents",value:function(e){e.ctrlKey&&(e.keyCode===67?this.handleCopy(e):e.keyCode===88?this.handleCut(e):(e.keyCode===86||e.which===86)&&this.handlePaste(e))}},{key:"handleCopy",value:function(e){if(_(this.state.editing)){e.preventDefault();var n=this.props,u=n.dataRenderer,r=n.valueRenderer,p=n.data,v=this.getState(),C=v.start,D=v.end;if(this.props.handleCopy)this.props.handleCopy({event:e,dataRenderer:u,valueRenderer:r,data:p,start:C,end:D,range:M});else{var g=M(C.i,D.i).map(function(b){return M(C.j,D.j).map(function(L){var x=p[b][L],Y=u?u(x,b,L):null;return Y===""||Y===null||typeof Y>"u"?r(x,b,L):Y}).join("	")}).join(`
`);window.clipboardData&&window.clipboardData.setData?window.clipboardData.setData("Text",g):e.clipboardData.setData("text/plain",g)}}}},{key:"handlePaste",value:function(e){if(_(this.state.editing)){var n=this.getState(),u=n.start,r=n.end;u={i:Math.min(u.i,r.i),j:Math.min(u.j,r.j)},r={i:Math.max(u.i,r.i),j:Math.max(u.j,r.j)};var p=this.props.parsePaste||a,v=[],C=[];window.clipboardData&&window.clipboardData.getData?C=p(window.clipboardData.getData("Text")):e.clipboardData&&e.clipboardData.getData&&(C=p(e.clipboardData.getData("text/plain")));var D=this.props,g=D.data,b=D.onCellsChanged,L=D.onPaste,x=D.onChange;if(b){var Y=[];C.forEach(function(I,G){I.forEach(function(F,V){r={i:u.i+G,j:u.j+V};var $=g[r.i]&&g[r.i][r.j];$?$.readOnly||v.push({cell:$,row:r.i,col:r.j,value:F}):Y.push({row:r.i,col:r.j,value:F})})}),Y.length?b(v,Y):b(v)}else L?(C.forEach(function(I,G){var F=[];I.forEach(function(V,$){r={i:u.i+G,j:u.j+$};var X=g[r.i]&&g[r.i][r.j];F.push({cell:X,data:V})}),v.push(F)}),L(v)):x&&C.forEach(function(I,G){I.forEach(function(F,V){r={i:u.i+G,j:u.j+V};var $=g[r.i]&&g[r.i][r.j];$&&!$.readOnly&&x($,r.i,r.j,F)})});this._setState({end:r})}}},{key:"handleKeyboardCellMovement",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=this.getState(),r=u.start,p=u.editing,v=this.props.data,C=p&&!_(p),D=v[r.i]&&v[r.i][r.j];if(C&&!n)return!1;var g=D&&D.component,b=e.which||e.keyCode;if(g&&C){e.preventDefault();return}b===N.TAB_KEY?this.handleNavigate(e,{i:0,j:e.shiftKey?-1:1},!0):b===N.RIGHT_KEY?this.handleNavigate(e,{i:0,j:1}):b===N.LEFT_KEY?this.handleNavigate(e,{i:0,j:-1}):b===N.UP_KEY?this.handleNavigate(e,{i:-1,j:0}):b===N.DOWN_KEY?this.handleNavigate(e,{i:1,j:0}):n&&b===N.ENTER_KEY&&this.handleNavigate(e,{i:e.shiftKey?-1:1,j:0})}},{key:"handleKey",value:function(e){if(!(e.isPropagationStopped&&e.isPropagationStopped())){var n=e.which||e.keyCode,u=this.getState(),r=u.start,p=u.end,v=u.editing,C=v&&!_(v),D=!r||_(r),g=e.ctrlKey||e.metaKey,b=n===N.DELETE_KEY||n===N.BACKSPACE_KEY,L=n===N.ENTER_KEY,x=n>=48&&n<=57,Y=n>=65&&n<=90,I=n>=160&&n<=255,G=n>=96&&n<=105,F=!D&&this.props.data[r.i][r.j],V=[187,189,190,107,109,110].indexOf(n)>-1;if(D||g)return!0;C||(this.handleKeyboardCellMovement(e),b?(e.preventDefault(),this.clearSelectedCells(r,p)):F&&!F.readOnly&&(L?(this._setState({editing:r,clear:{},forceEdit:!0}),e.preventDefault()):(x||G||Y||I||V)&&this._setState({editing:r,clear:r,forceEdit:!1})))}}},{key:"getSelectedCells",value:function(e,n,u){var r=[];return M(n.i,u.i).map(function(p){M(n.j,u.j).map(function(v){e[p]&&e[p][v]&&r.push({cell:e[p][v],row:p,col:v})})}),r}},{key:"clearSelectedCells",value:function(e,n){var u=this,r=this.props,p=r.data,v=r.onCellsChanged,C=r.onChange,D=this.getSelectedCells(p,e,n).filter(function(g){return!g.cell.readOnly}).map(function(g){return j({},g,{value:""})});v?(v(D),this.onRevert()):C&&setTimeout(function(){D.forEach(function(g){var b=g.cell,L=g.row,x=g.col,Y=g.value;C(b,L,x,Y)}),u.onRevert()},0)}},{key:"updateLocationSingleCell",value:function(e){this._setState({start:e,end:e,editing:{}})}},{key:"updateLocationMultipleCells",value:function(e){var n=this.getState(),u=n.start,r=n.end,p=this.props.data,v={i:u.i,j:u.j},C={i:r.i+e.i,j:Math.min(p[0].length-1,Math.max(0,r.j+e.j))};this._setState({start:v,end:C,editing:{}})}},{key:"searchForNextSelectablePos",value:function(e,n,u,r,p){for(var v=function(x){return{i:x.i-1,j:n[0].length-1}},C=function(x){return{i:x.i+1,j:0}},D=function(x){return{i:x.i+r.i,j:x.j+r.j}},g=function(x){var Y=x.i,I=x.j;return n[Y]&&typeof n[Y][I]<"u"},b=D(u);g(b)&&!e(n[b.i][b.j],b.i,b.j);)b=D(b);if(!g(b)){if(!p)return null;r.j<0?b=v(b):b=C(b)}return g(b)&&!e(n[b.i][b.j],b.i,b.j)?this.searchForNextSelectablePos(e,n,b,r,p):g(b)?b:null}},{key:"handleNavigate",value:function(e,n,u){if(n&&(n.i||n.j)){var r=this.props.data,p=this.getState(),v=p.start,C=e.shiftKey&&!u,D=this.props.isCellNavigable?this.props.isCellNavigable:function(){return!0};if(C)this.updateLocationMultipleCells(n);else{var g=this.searchForNextSelectablePos(D,r,v,n,u);g&&this.updateLocationSingleCell(g)}e.preventDefault()}}},{key:"handleComponentKey",value:function(e){var n=this,u=e.which||e.keyCode;if([N.ENTER_KEY,N.ESCAPE_KEY,N.TAB_KEY].includes(u)){var r=this.state.editing,p=this.props.data,v=!_(r);if(v){var C=p[r.i][r.j],D=e.shiftKey?-1:1;if(C&&C.component&&!C.forceComponent){e.preventDefault();var g=this.onRevert;u===N.ENTER_KEY?g=function(){return n.handleNavigate(e,{i:D,j:0})}:u===N.TAB_KEY&&(g=function(){return n.handleNavigate(e,{i:0,j:D},!0)}),setTimeout(function(){g(),n.dgDom&&n.dgDom.focus({preventScroll:!0})},1)}}}}},{key:"onContextMenu",value:function(e,n,u){var r=this.props.data[n][u];this.props.onContextMenu&&this.props.onContextMenu(e,r,n,u)}},{key:"onDoubleClick",value:function(e,n){var u=this.props.data[e][n];u.readOnly||this._setState({editing:{i:e,j:n},forceEdit:!0,clear:{}})}},{key:"onMouseDown",value:function(e,n,u){var r=!_(this.state.editing)&&this.state.editing.i===e&&this.state.editing.j===n,p=_(this.state.editing)||this.state.editing.i!==e||this.state.editing.j!==n?{}:this.state.editing;this._setState({selecting:!r,start:u.shiftKey?this.getState().start:{i:e,j:n},end:{i:e,j:n},editing:p,forceEdit:!!r});var v=window.navigator.userAgent,C=/MSIE|Trident/.test(v);C&&document.addEventListener("keydown",this.handleIEClipboardEvents),document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousedown",this.pageClick),document.addEventListener("cut",this.handleCut),document.addEventListener("copy",this.handleCopy),document.addEventListener("paste",this.handlePaste)}},{key:"onMouseOver",value:function(e,n){this.state.selecting&&_(this.state.editing)&&this._setState({end:{i:e,j:n}})}},{key:"onMouseUp",value:function(){this._setState({selecting:!1}),document.removeEventListener("mouseup",this.onMouseUp)}},{key:"onChange",value:function(e,n,u){var r=this.props,p=r.onChange,v=r.onCellsChanged,C=r.data;v?v([{cell:C[e][n],row:e,col:n,value:u}]):p&&p(C[e][n],e,n,u),this.onRevert()}},{key:"onRevert",value:function(){var e=this;this._setState({editing:{}}),setTimeout(function(){e.dgDom&&e.dgDom.focus({preventScroll:!0})},1)}},{key:"componentDidUpdate",value:function(e,n){var u=this.state,r=u.start,p=u.end,v=n.end;!_(p)&&!(p.i===v.i&&p.j===v.j)&&!this.isSelectionControlled()&&this.props.onSelect&&this.props.onSelect({start:r,end:p})}},{key:"isSelectedRow",value:function(e){var n=this.getState(),u=n.start,r=n.end,p=u.i,v=r.i;return p<=v?e>=p&&e<=v:e<=p&&e>=v}},{key:"isSelected",value:function(e,n){var u=this.getState(),r=u.start,p=u.end,v=n>=r.j&&n<=p.j,C=n<=r.j&&n>=p.j,D=e>=r.i&&e<=p.i,g=e<=r.i&&e>=p.i;return v&&D||C&&D||C&&g||v&&g}},{key:"isEditing",value:function(e,n){return this.state.editing.i===e&&this.state.editing.j===n}},{key:"isClearing",value:function(e,n){return this.state.clear.i===e&&this.state.clear.j===n}},{key:"render",value:function(){var e=this,n=this.props,u=n.sheetRenderer,r=n.rowRenderer,p=n.cellRenderer,v=n.dataRenderer,C=n.valueRenderer,D=n.dataEditor,g=n.valueViewer,b=n.attributesRenderer,L=n.className,x=n.overflow,Y=n.data,I=n.keyFn,G=this.state.forceEdit;return O.default.createElement("span",{ref:function(V){e.dgDom=V},tabIndex:"0",className:"data-grid-container",onKeyDown:this.handleKey},O.default.createElement(u,{data:Y,className:["data-grid",L,x].filter(function(F){return F}).join(" ")},Y.map(function(F,V){return O.default.createElement(r,{key:I?I(V):V,row:V,cells:F,selected:e.isSelectedRow(V)},F.map(function($,X){var ye=e.isEditing(V,X);return O.default.createElement(t.default,j({key:$.key?$.key:V+"-"+X,row:V,col:X,cell:$,forceEdit:!1,onMouseDown:e.onMouseDown,onMouseOver:e.onMouseOver,onDoubleClick:e.onDoubleClick,onContextMenu:e.onContextMenu,onChange:e.onChange,onRevert:e.onRevert,onNavigate:e.handleKeyboardCellMovement,onKey:e.handleKey,selected:e.isSelected(V,X),editing:ye,clearing:e.isClearing(V,X),attributesRenderer:b,cellRenderer:p,valueRenderer:C,dataRenderer:v,valueViewer:g,dataEditor:D},ye?{forceEdit:G}:{}))}))})))}}]),f}(k.PureComponent);return ae.default=c,c.propTypes={data:i.default.array.isRequired,className:i.default.string,disablePageClick:i.default.bool,overflow:i.default.oneOf(["wrap","nowrap","clip"]),onChange:i.default.func,onCellsChanged:i.default.func,onContextMenu:i.default.func,onSelect:i.default.func,isCellNavigable:i.default.func,selected:i.default.shape({start:i.default.shape({i:i.default.number,j:i.default.number}),end:i.default.shape({i:i.default.number,j:i.default.number})}),valueRenderer:i.default.func.isRequired,dataRenderer:i.default.func,sheetRenderer:i.default.func.isRequired,rowRenderer:i.default.func.isRequired,cellRenderer:i.default.func.isRequired,valueViewer:i.default.func,dataEditor:i.default.func,parsePaste:i.default.func,attributesRenderer:i.default.func,keyFn:i.default.func,handleCopy:i.default.func,editModeChanged:i.default.func},c.defaultProps={sheetRenderer:K.default,rowRenderer:q.default,cellRenderer:w.default,valueViewer:U.default,dataEditor:m.default},ae}var ke;function Ye(){if(ke)return A;ke=1,Object.defineProperty(A,"__esModule",{value:!0}),A.renderData=A.renderValue=A.ValueViewer=A.DataEditor=A.Cell=A.Row=A.Sheet=void 0;var j=Le(),E=t(j),k=Me(),O=t(k),s=je(),i=t(s),P=he(),K=t(P),T=ve(),q=t(T),S=pe(),w=t(S),o=Ke();function t(l){return l&&l.__esModule?l:{default:l}}return A.default=E.default,A.Sheet=O.default,A.Row=i.default,A.Cell=K.default,A.DataEditor=q.default,A.ValueViewer=w.default,A.renderValue=o.renderValue,A.renderData=o.renderData,A}var Ae=Ye();const Ue=qe(Ae);var ce={exports:{}},Oe;function Fe(){return Oe||(Oe=1,function(j,E){ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(k,O,s){O.isDark=!1,O.cssClass="ace-tm",O.cssText=k("./textmate-css"),O.$id="ace/theme/textmate";var i=k("../lib/dom");i.importCssString(O.cssText,O.cssClass,!1)}),function(){ace.require(["ace/theme/textmate"],function(k){j&&(j.exports=k)})}()}(ce)),ce.exports}Fe();const Je=()=>{const[j,E]=re.useState("{}"),[k,O]=re.useState([]),[s]=re.useState({useWorker:!1,showLineNumbers:!0,tabSize:2,wrap:!0,fontSize:14});return re.useEffect(()=>{try{const i=Te.parse(j);if(console.log(i),Array.isArray(i)){let P=[];i.forEach(T=>{Object.keys(T).forEach(S=>{P.push({value:S,readOnly:!0})})}),P=Ne(P,(T,q)=>T.value===q.value);const K=[];i.forEach(T=>{const q=P.map(S=>({value:T[S.value]||null,readOnly:!0}));K.push(q)}),O([P,...K])}}catch(i){i instanceof SyntaxError&&console.error(i.message)}},[j]),ee.jsxs("div",{children:[ee.jsx("div",{className:"h-[300px] w-full",children:ee.jsx(xe,{theme:"textmate",placeholder:"JSON",setOptions:s,value:j,onChange:E,mode:"json5",width:"100%",height:"100%"})}),ee.jsx("div",{className:"mt-6 w-full",children:ee.jsx(Ue,{data:k,valueRenderer:i=>i.value})})]})};export{Je as Component};
