import{af as e}from"./pro-components-L2sDkqQs.js";import{F as j}from"./FullContainer-76xxcO_u.js";import{L as b,d as C}from"./index-Gl7nNnap.js";import{c as v}from"./index-0oxnn2GF.js";import{c as L,p as N,a as E}from"./middleware-DqHBdyGy.js";import{a as r,bn as c}from"./antd-Bzy0GL_f.js";import"./json-editor-CBqK5HSN.js";const O=L()(N(a=>({value:"// some code here",options:{tabSize:2},language:"json",setValue:o=>a(()=>({value:o})),setOptions:o=>a(()=>({options:o})),setLanguage:o=>a(()=>({language:o}))}),{name:"json-formatter",storage:E(()=>localStorage)})),J=()=>{const[a,o]=r.useState({lineNumber:0,column:0}),i=r.useRef(void 0),m=r.useRef(void 0),{value:d,setValue:p,options:n,language:l,setLanguage:g}=O();r.useEffect(()=>{var t;(t=i.current)==null||t.updateOptions(n)},[n]);const h=(t,s)=>{i.current=t,m.current=s,t.onDidChangeCursorPosition(u=>{o(S=>({...S,lineNumber:u.position.lineNumber,column:u.position.column}))}),s.languages.json.jsonDefaults.setDiagnosticsOptions({allowComments:!0}),s.languages.html.registerHTMLLanguageService("xml",{},{documentFormattingEdits:!0})},f=(t,s)=>{p(t||"")},x=t=>{console.log(t)};return e.jsxs(j,{children:[e.jsx("div",{className:"h-[48px] p-2",children:e.jsx(b,{value:l,onChange:g})}),e.jsx(C,{height:"calc(100% - 70px)",language:l,options:{automaticLayout:!0,tabSize:n.tabSize,formatOnType:!0,stickyTabStops:!0,stickyScroll:{enabled:!0,maxLineCount:10,defaultModel:"foldingProviderModel"}},theme:"light",defaultValue:d,onMount:h,onChange:f,onValidate:x}),e.jsxs("div",{className:v("h-[22px] px-4 text-sm tabular-nums"),children:[e.jsx("span",{children:`Ln ${a.lineNumber}, Col ${a.column}`}),e.jsx(c,{type:"vertical"}),e.jsx("span",{children:`Space ${n.tabSize}`}),e.jsx(c,{type:"vertical"}),e.jsx("span",{children:"JSON with Comments"})]})]})};export{J as Component};
