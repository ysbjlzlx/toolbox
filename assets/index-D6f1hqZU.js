import{af as e,al as j,ao as c}from"./pro-components-L2sDkqQs.js";import{a as r,B as p,bw as g,bi as h,bn as u,ak as b,ac as k}from"./antd-Bzy0GL_f.js";import{u as y,I as T}from"./index-0oxnn2GF.js";import"./index-08JC0wQa.js";import{aC as x}from"./md-editor-C6otpRZL.js";import{aW as w}from"./json-editor-CBqK5HSN.js";import"./ace-BbTluGSE.js";function N(s=!1){if(typeof s!="boolean")throw new Error("defaultValue must be `true` or `false`");const[t,a]=r.useState(s),l=r.useCallback(()=>{a(!0)},[]),o=r.useCallback(()=>{a(!1)},[]),n=r.useCallback(()=>{a(i=>!i)},[]);return{value:t,setValue:a,setTrue:l,setFalse:o,toggle:n}}function S(){const[s,t]=r.useState(null),a=r.useCallback(async l=>{if(!(navigator!=null&&navigator.clipboard))return console.warn("Clipboard not supported"),!1;try{return await navigator.clipboard.writeText(l),t(l),!0}catch(o){return console.warn("Copy failed",o),t(null),!1}},[]);return[s,a]}const C=({text:s,onClickRefreshBtn:t,...a})=>{const{value:l,setTrue:o,setFalse:n}=N(!1),[i,d]=S(),v=()=>{s&&s.length>0&&d(s).then(()=>{o(),setTimeout(()=>{n()},2e3)})};return e.jsxs("div",{children:[e.jsx("div",{className:"mt-2 break-words rounded-md border p-5 text-center",children:e.jsx("span",{className:"font-bold text-blue-500 text-lg",children:s})}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx("div",{children:e.jsx(p,{type:"primary",onClick:v,block:!0,children:l?"已复制":a.copyBtnText||"复制"})}),e.jsx("div",{children:e.jsx(p,{block:!0,onClick:t,children:a.refreshBtnText||"刷新"})})]})]})},B="0123456789",m=x(B,6),R=()=>{const[s,t]=r.useState(6),[a,l]=r.useState("");return r.useEffect(()=>{l(m(s))},[s]),e.jsx(g,{children:e.jsxs("div",{className:"pt-6",children:[e.jsx("div",{children:e.jsx(h,{children:e.jsx(h.Text,{children:"自定义新密码"})})}),e.jsx(u,{}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-6 flex-initial",children:"长度"}),e.jsx("div",{className:"flex-auto",children:e.jsx(b,{min:3,max:12,step:1,value:s,onChange:o=>t(o)})}),e.jsx("div",{className:"w-24 flex-initial",children:e.jsx(k,{min:3,max:12,value:s,onChange:o=>{t(o||6)}})})]}),e.jsx(u,{}),e.jsx("div",{children:e.jsx(h,{children:e.jsx(h.Text,{children:"生成密码"})})}),e.jsx("div",{children:e.jsx(C,{text:a,copyBtnText:"复制密码",refreshBtnText:"刷新密码",onClickRefreshBtn:()=>{l(m(s))}})})]})})},z="0123456789",A="abcdefghijklmnopqrstuvwxyz",E="ABCDEFGHIJKLMNOPQRSTUVWXYZ",P="!@#$%&*().",I="346789",L="abcdefghijkmnpqrtwxyz",O="ABCDEFGHJKLMNPQRTUVWXY",F={length:12,numbers:!0,lowercase:!0,uppercase:!0,symbols:!1,nolookalikes:!0,includeAllTypes:!0},K=s=>{const t={...F,...s},a=t.length,l=[];t.numbers&&l.push(t.nolookalikes?I:z),t.lowercase&&l.push(t.nolookalikes?L:A),t.uppercase&&l.push(t.nolookalikes?O:E),t.symbols&&l.push(P);let o="";if(t.includeAllTypes){const n=[];for(const i of l)n.push(x(i)(1));o+=w(n).slice(0,a).join("")}return o.length<a&&(o+=x(l.join(""))(a-o.length)),o},f={length:12,numbers:!0,lowercase:!0,uppercase:!0,symbols:!1,nolookalikes:!0,includeAllTypes:!0},V=()=>{const[s,t]=r.useState(f),[a,l]=r.useState("");r.useEffect(()=>{o(s)},[s]);const o=(n=f)=>{const i=K(n);l(i)};return e.jsx(j,{title:!1,className:"mx-auto max-w-screen-lg px-4 pt-4",children:e.jsxs("div",{children:[e.jsx(c,{title:"数字",description:"0 ~ 9",size:"small",defaultChecked:!0,onChange:n=>{t({...s,numbers:n})}}),e.jsx(c,{title:"小写字母",description:"a ~ z",size:"small",defaultChecked:!0,onChange:n=>{t({...s,lowercase:n})}}),e.jsx(c,{title:"大写字母",description:"A ~ Z",size:"small",defaultChecked:!0,onChange:n=>{t({...s,uppercase:n})}}),e.jsx(c,{title:"符号",description:"! @ # $ % & * ( ) .",size:"small",onChange:n=>{t({...s,symbols:n})}}),e.jsx(u,{}),e.jsx(c,{title:"排除相似的字符",description:"0 1 2 5 l o s u v I O S Z",size:"small",defaultChecked:!0,onChange:n=>{t({...s,nolookalikes:n})}}),e.jsx(c,{title:"包含每一种字符",description:"-",size:"small",defaultChecked:!0,onChange:n=>{t({...s,includeAllTypes:n})}}),e.jsx(u,{}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-6 flex-initial",children:"长度"}),e.jsx("div",{className:"flex-auto",children:e.jsx(b,{min:6,max:64,step:1,marks:{6:"6",8:"8",12:"12",16:"16",32:"32",64:"64"},value:s.length,onChange:n=>t({...s,length:n})})}),e.jsx("div",{className:"w-24 flex-initial",children:e.jsx(k,{min:6,max:64,value:s.length,onChange:n=>{t({...s,length:n||8})}})})]}),e.jsx(u,{}),e.jsx("div",{children:e.jsx(C,{text:a,copyBtnText:"复制密码",refreshBtnText:"刷新密码",onClickRefreshBtn:()=>{o(s)}})})]})})},q=[{label:"# PIN",key:"pin"},{label:e.jsxs("span",{children:[e.jsx(T,{icon:"lucide:shuffle"})," 随机"]}),key:"random"}],J=()=>{const[s,t]=r.useState("pin"),[a,l]=y();r.useEffect(()=>{const i=a==null?void 0:a.get("tab");i&&i.length>0&&t(i)},[a]);const o={pin:e.jsx(R,{}),random:e.jsx(V,{})},n=i=>{t(i);const d=new URLSearchParams(a);d.set("tab",i),l(d)};return e.jsx(j,{title:"密码",className:"p-4",children:e.jsx(g,{tabList:q,onTabChange:n,activeTabKey:s,children:o[s]})})};export{J as Component};
